# ReAct Agent ç³»ç»Ÿ - é¢è¯•ä»‹ç»æŒ‡å—

## ğŸ¯ å¿«é€Ÿå‚è€ƒå¡ï¼ˆé¢è¯•å‰ 5 åˆ†é’Ÿçœ‹è¿™é‡Œï¼‰

### 30ç§’ç”µæ¢¯æ¼”è®²
> "è¿™æ˜¯ä¸€ä¸ªåŸºäº ReAct æ¡†æ¶çš„æ™ºèƒ½ AI Agent ç³»ç»Ÿï¼Œèƒ½å¤Ÿé€šè¿‡å¤šæ­¥æ¨ç†å’Œè¡ŒåŠ¨è§£å†³å¤æ‚ä»»åŠ¡ã€‚ç³»ç»Ÿæ”¯æŒæœ€å¤š 5 æ¬¡è¿­ä»£çš„æ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿå¾ªç¯ï¼Œå…·å¤‡ä»»åŠ¡è§„åˆ’ã€å·¥å…·ç¼–æ’ã€ä¼šè¯è®°å¿†å’Œè‡ªæˆ‘åæ€èƒ½åŠ›ã€‚æŠ€æœ¯æ ˆæ˜¯ Next.js + FastAPI + Gemini 2.0ï¼Œå®ç°äº†å®Œæ•´çš„ ReAct æ¨ç†å¾ªç¯ï¼Œæœˆæˆæœ¬ 2-3 ç¾å…ƒã€‚"

### 5 ä¸ªå¿…è¯´äº®ç‚¹
1. **ReAct æ¨ç†å¾ªç¯** - å¤šæ­¥æ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿå¾ªç¯ï¼Œæœ€å¤š 5 æ¬¡è¿­ä»£
2. **SSE æµå¼è¾“å‡º** - å®æ—¶æ˜¾ç¤º Agent æ€è€ƒè¿‡ç¨‹ï¼Œæ‰“å­—æœºæ•ˆæœå“åº”
3. **æ™ºèƒ½ä»»åŠ¡è§„åˆ’** - è‡ªåŠ¨åˆ†è§£å¤æ‚æŸ¥è¯¢ä¸ºå¯æ‰§è¡Œæ­¥éª¤
4. **ä¼šè¯è®°å¿†ç®¡ç†** - PostgreSQL æŒä¹…åŒ–å­˜å‚¨ï¼Œæ”¯æŒå¯¹è¯æ‘˜è¦
5. **å·¥å…·ç¼–æ’ç³»ç»Ÿ** - æ”¯æŒå·¥å…·é“¾æ‰§è¡Œã€å‚æ•°å¼•ç”¨å’Œç»“æœç¼“å­˜

### å¯æ·±å…¥è®¨è®ºçš„æŠ€æœ¯ç‚¹
- ReAct å¾ªç¯çš„å®ç°åŸç†ï¼ˆæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿï¼‰
- SSE æµå¼è¾“å‡ºçš„æ¶æ„è®¾è®¡ï¼ˆå¼‚æ­¥é˜Ÿåˆ—ã€å›è°ƒæœºåˆ¶ã€æˆ˜ç•¥æ€§å»¶è¿Ÿï¼‰
- ä»»åŠ¡è§„åˆ’å™¨çš„å¤æ‚åº¦åˆ†ç±»ç®—æ³•
- ä¼šè¯è®°å¿†çš„å‹ç¼©å’Œæ‘˜è¦ç­–ç•¥
- å·¥å…·ç¼–æ’çš„ä¾èµ–è§£ææœºåˆ¶
- è´¨é‡è¯„ä¼°å’Œåæ€å¼•æ“çš„è®¾è®¡

### é¢è¯•è¯æœ¯æ¨¡æ¿
**å¼€åœº**ï¼š"æˆ‘æƒ³ä»‹ç»ä¸€ä¸ªåŸºäº ReAct æ¡†æ¶çš„æ™ºèƒ½ Agent ç³»ç»Ÿ..."
**åŠŸèƒ½æ¼”ç¤º**ï¼š"æ¯”å¦‚ç”¨æˆ·é—®'åˆ†ææœ€è¿‘ OpenAI çš„æŠ€æœ¯è¿›å±•'ï¼Œç³»ç»Ÿä¼šåˆ›å»ºæ‰§è¡Œè®¡åˆ’ï¼Œç„¶åè¿›å…¥ ReAct å¾ªç¯ï¼šç¬¬ä¸€æ¬¡è¿­ä»£æ€è€ƒéœ€è¦æœç´¢æ–°é—»ï¼Œæ‰§è¡Œæœç´¢å·¥å…·ï¼›ç¬¬äºŒæ¬¡è¿­ä»£åˆ†æè¶‹åŠ¿ï¼Œæ‰§è¡Œåˆ†æå·¥å…·ï¼›æœ€ååˆæˆå®Œæ•´å“åº”..."
**æŠ€æœ¯æ·±å…¥**ï¼š"æ ¸å¿ƒæ˜¯ ReAct æ¨ç†å¾ªç¯ï¼Œæ¯æ¬¡è¿­ä»£åŒ…å« Thoughtï¼ˆæ€è€ƒï¼‰ã€Actionï¼ˆè¡ŒåŠ¨ï¼‰ã€Observationï¼ˆè§‚å¯Ÿï¼‰ä¸‰ä¸ªé˜¶æ®µï¼Œé€šè¿‡ LLM ç”Ÿæˆæ¨ç†ï¼Œè‡ªåŠ¨é€‰æ‹©å·¥å…·ï¼Œè®°å½•æ‰§è¡Œç»“æœï¼Œæœ€å¤šè¿­ä»£ 5 æ¬¡..."
**æˆæœé‡åŒ–**ï¼š"ç³»ç»Ÿæ”¯æŒå¤æ‚çš„å¤šæ­¥ä»»åŠ¡ï¼Œä¼šè¯è®°å¿†å¯ä»¥è·¨è½®æ¬¡ä¿æŒä¸Šä¸‹æ–‡ï¼Œå·¥å…·ç»“æœç¼“å­˜ 5 åˆ†é’Ÿï¼Œå“åº”æ—¶é—´ç®€å•æŸ¥è¯¢ < 2 ç§’ï¼Œå¤æ‚æŸ¥è¯¢ < 10 ç§’..."
**æ€»ç»“**ï¼š"è¿™ä¸ªé¡¹ç›®è®©æˆ‘æ·±å…¥ç†è§£äº† ReAct Agent çš„å®Œæ•´å®ç°ï¼Œä»ä»»åŠ¡è§„åˆ’ã€å·¥å…·ç¼–æ’åˆ°ä¼šè¯ç®¡ç†å’Œè´¨é‡è¯„ä¼°..."

---

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

### ğŸ’¬ å£å¤´è¡¨è¿°ç‰ˆæœ¬ï¼ˆ30ç§’ï¼‰
> "è¿™æ˜¯ä¸€ä¸ªåŸºäº ReAct æ¡†æ¶çš„æ™ºèƒ½ Agent ç³»ç»Ÿã€‚**æ ¸å¿ƒäº®ç‚¹æ˜¯å¤šæ­¥æ¨ç†å¾ªç¯**ï¼šç³»ç»Ÿèƒ½å¤Ÿè‡ªä¸»æ€è€ƒã€é€‰æ‹©å·¥å…·ã€æ‰§è¡Œè¡ŒåŠ¨ã€è§‚å¯Ÿç»“æœï¼Œæœ€å¤šè¿­ä»£ 5 æ¬¡æ¥å®Œæˆå¤æ‚ä»»åŠ¡ã€‚æ¯”å¦‚åˆ†æ OpenAI æŠ€æœ¯è¿›å±•ï¼Œç³»ç»Ÿä¼šå…ˆæœç´¢ç›¸å…³æ–°é—»ï¼Œå†åˆ†ææŠ€æœ¯è¶‹åŠ¿ï¼Œæœ€ååˆæˆå®Œæ•´æŠ¥å‘Šã€‚å…·å¤‡ä»»åŠ¡è§„åˆ’ã€å·¥å…·ç¼–æ’ã€ä¼šè¯è®°å¿†å’Œè´¨é‡è¯„ä¼°èƒ½åŠ›ã€‚æŠ€æœ¯æ ˆæ˜¯ Next.js + FastAPI + Gemini 2.0ï¼Œæœˆæˆæœ¬ 2-3 ç¾å…ƒã€‚"

**å…³é”®æ•°å­—**ï¼š
- ğŸ”„ æœ€å¤š 5 æ¬¡ ReAct è¿­ä»£
- ğŸ§  3 ä¸ªæ ¸å¿ƒé˜¶æ®µï¼ˆæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿï¼‰
- ğŸ’¾ PostgreSQL ä¼šè¯æŒä¹…åŒ–
- ğŸ’° $2-3/æœˆè¿è¡Œæˆæœ¬
- âš¡ <2s ç®€å•æŸ¥è¯¢ï¼Œ<10s å¤æ‚æŸ¥è¯¢

---

### 1.1 é¡¹ç›®å®šä½
ReAct Agent æ˜¯ä¸€ä¸ªåŸºäº ReAct (Reasoning + Acting) æ¡†æ¶çš„æ™ºèƒ½å¯¹è¯ç³»ç»Ÿï¼Œé›†æˆåœ¨æˆ‘çš„ä¸ªäººç½‘ç«™ä¸­ã€‚å®ƒèƒ½å¤Ÿé€šè¿‡**å¤šæ­¥æ¨ç†å’Œè¡ŒåŠ¨**æ¥è§£å†³å¤æ‚ä»»åŠ¡ï¼Œå…·å¤‡è‡ªä¸»æ€è€ƒã€å·¥å…·é€‰æ‹©ã€æ‰§è¡Œè§‚å¯Ÿå’Œè‡ªæˆ‘åæ€çš„èƒ½åŠ›ã€‚

### 1.2 æ ¸å¿ƒä»·å€¼
- **å¤šæ­¥æ¨ç†**ï¼šé€šè¿‡ ReAct å¾ªç¯å®ç°å¤æ‚ä»»åŠ¡çš„åˆ†æ­¥æ‰§è¡Œ
- **ä»»åŠ¡è§„åˆ’**ï¼šè‡ªåŠ¨åˆ†ææŸ¥è¯¢å¤æ‚åº¦å¹¶åˆ†è§£ä¸ºå¯æ‰§è¡Œæ­¥éª¤
- **ä¼šè¯è®°å¿†**ï¼šæŒä¹…åŒ–å¯¹è¯å†å²ï¼Œæ”¯æŒè·¨è½®æ¬¡ä¸Šä¸‹æ–‡ç†è§£
- **å·¥å…·ç¼–æ’**ï¼šæ™ºèƒ½ç®¡ç†å·¥å…·é“¾æ‰§è¡Œï¼Œæ”¯æŒå‚æ•°å¼•ç”¨å’Œç¼“å­˜
- **è´¨é‡è¯„ä¼°**ï¼šè‡ªæˆ‘åæ€å’Œè¾“å‡ºè´¨é‡è¯„ä¼°ï¼Œå†³å®šæ˜¯å¦ç»§ç»­è¿­ä»£

---

## äºŒã€ä¸»è¦åŠŸèƒ½

### ğŸ’¬ å£å¤´è¡¨è¿°ç‰ˆæœ¬ï¼ˆ1åˆ†é’Ÿï¼‰
> "ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯ **ReAct æ¨ç†å¾ªç¯**ã€‚æ¯æ¬¡è¿­ä»£åŒ…å«ä¸‰ä¸ªé˜¶æ®µï¼š
> 
> 1. **Thoughtï¼ˆæ€è€ƒï¼‰**ï¼šLLM åˆ†æå½“å‰çŠ¶æ€ï¼Œæ€è€ƒä¸‹ä¸€æ­¥åº”è¯¥åšä»€ä¹ˆ
> 2. **Actionï¼ˆè¡ŒåŠ¨ï¼‰**ï¼šé€‰æ‹©åˆé€‚çš„å·¥å…·å¹¶ç¡®å®šå‚æ•°
> 3. **Observationï¼ˆè§‚å¯Ÿï¼‰**ï¼šæ‰§è¡Œå·¥å…·ï¼Œè®°å½•ç»“æœ
> 
> æ¯”å¦‚ç”¨æˆ·é—®'åˆ†ææœ€è¿‘ OpenAI çš„æŠ€æœ¯è¿›å±•'ï¼Œç³»ç»Ÿä¼šï¼š
> - ç¬¬ 1 æ¬¡è¿­ä»£ï¼šæ€è€ƒéœ€è¦æœç´¢æ–°é—» â†’ æ‰§è¡Œ search_news â†’ è§‚å¯Ÿåˆ° 10 ç¯‡ç›¸å…³æ–‡ç« 
> - ç¬¬ 2 æ¬¡è¿­ä»£ï¼šæ€è€ƒéœ€è¦åˆ†æè¶‹åŠ¿ â†’ æ‰§è¡Œ analyze_trends â†’ è§‚å¯Ÿåˆ° 3 ä¸ªä¸»è¦è¶‹åŠ¿
> - æœ€ååˆæˆå®Œæ•´å“åº”ï¼ŒåŒ…å«æ‰€æœ‰å…³é”®ä¿¡æ¯
> 
> æ•´ä¸ªè¿‡ç¨‹æœ€å¤š 5 æ¬¡è¿­ä»£ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ¤æ–­ä½•æ—¶ä»»åŠ¡å®Œæˆã€‚"

**æ¼”ç¤ºè¯æœ¯**ï¼š
- "è¿™ä¸æ˜¯ç®€å•çš„å•æ¬¡å·¥å…·è°ƒç”¨ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„æ¨ç†å¾ªç¯ï¼ŒAgent èƒ½å¤Ÿè‡ªä¸»å†³å®šæ‰§è¡Œæ­¥éª¤"

---

### 2.1 è‡ªç„¶è¯­è¨€è¾“å…¥
```
è‡ªç„¶è¯­è¨€ï¼šæœ€è¿‘æœ‰ä»€ä¹ˆ AI æ–°é—»ï¼Ÿ â†’ LLM é€‰æ‹© get_latest_news å·¥å…·
```

### 2.2 æ ¸å¿ƒå·¥å…·åˆ—è¡¨
| å·¥å…·åç§° | è¯´æ˜ | å‚æ•° |
|---------|------|------|
| **get_latest_news** | è·å–æœ€æ–° AI æ–°é—» | count (integer), keywords (array) |
| **get_trending_topics** | è¯†åˆ«çƒ­é—¨è¯é¢˜ | category (string, optional) |
| **deep_analysis** | ç‰¹å®šä¸»é¢˜æ·±åº¦æŠ¥å‘Š | topic (string, required) |

---

## ä¸‰ã€æŠ€æœ¯æ¶æ„

### ğŸ’¬ å£å¤´è¡¨è¿°ç‰ˆæœ¬ï¼ˆ2åˆ†é’Ÿï¼‰
> "æ¶æ„ä¸Šé‡‡ç”¨**åˆ†å±‚è®¾è®¡ + ReAct å¾ªç¯**ã€‚å‰ç«¯æ˜¯ Next.jsï¼Œåç«¯æ˜¯ Python FastAPIã€‚
> 
> **æ ¸å¿ƒæ˜¯äº”å±‚æ¶æ„**ï¼š
> 1. **ReactAgentï¼ˆæ‰§è¡Œå™¨å±‚ï¼‰**ï¼šåè°ƒæ•´ä¸ª ReAct å¾ªç¯ï¼Œç®¡ç†è¿­ä»£çŠ¶æ€å’Œå†å²ï¼Œé›†æˆæ‰€æœ‰å­ç»„ä»¶ã€‚
> 
> 2. **TaskPlannerï¼ˆä»»åŠ¡è§„åˆ’å±‚ï¼‰**ï¼šåˆ†æä»»åŠ¡å¤æ‚åº¦ï¼ˆç®€å•/ä¸­ç­‰/å¤æ‚ï¼‰ï¼Œå°†å¤æ‚æŸ¥è¯¢åˆ†è§£ä¸ºå­ä»»åŠ¡ï¼Œä¼°è®¡éœ€è¦çš„è¿­ä»£æ¬¡æ•°ã€‚
> 
> 3. **ToolOrchestratorï¼ˆå·¥å…·ç¼–æ’å±‚ï¼‰**ï¼šæ‰§è¡Œå·¥å…·é“¾ï¼Œå¤„ç†å·¥å…·é—´çš„ä¾èµ–å…³ç³»ï¼Œè§£æå‚æ•°å¼•ç”¨ï¼ˆå¦‚ ${step1.result}ï¼‰ï¼Œç¼“å­˜å·¥å…·ç»“æœã€‚
> 
> 4. **ConversationMemoryï¼ˆä¼šè¯è®°å¿†å±‚ï¼‰**ï¼šPostgreSQL æŒä¹…åŒ–å­˜å‚¨å¯¹è¯å†å²ï¼Œé•¿å¯¹è¯è‡ªåŠ¨æ‘˜è¦å‹ç¼©ï¼Œ24 å°æ—¶è‡ªåŠ¨æ¸…ç†è¿‡æœŸä¼šè¯ã€‚
> 
> 5. **LLM Serviceï¼ˆæœåŠ¡å±‚ï¼‰**ï¼šGemini 2.0 Flash ç”¨äºæ¨ç†ç”Ÿæˆå’Œå“åº”åˆæˆï¼Œæ”¯æŒä»»åŠ¡è§„åˆ’ã€ReAct è¿­ä»£ã€è´¨é‡è¯„ä¼°ç­‰åœºæ™¯ã€‚
> 
> **æŠ€æœ¯äº®ç‚¹**æ˜¯å®Œæ•´çš„ ReAct æ¨ç†å¾ªç¯ï¼Œæ¯æ¬¡è¿­ä»£éƒ½åŒ…å«æ€è€ƒã€è¡ŒåŠ¨ã€è§‚å¯Ÿä¸‰ä¸ªé˜¶æ®µï¼Œæœ€å¤š 5 æ¬¡è¿­ä»£ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ¤æ–­ä»»åŠ¡å®Œæˆã€‚"

**å…³é”®è®¾è®¡æ¨¡å¼**ï¼š
- ğŸ”„ ReAct æ¨ç†å¾ªç¯ï¼ˆThought-Action-Observationï¼‰
- ğŸ“‹ ä»»åŠ¡è§„åˆ’å’Œåˆ†è§£ï¼ˆTask Planningï¼‰
- ğŸ”§ å·¥å…·ç¼–æ’å’Œç¼“å­˜ï¼ˆTool Orchestrationï¼‰
- ğŸ’¾ ä¼šè¯è®°å¿†ç®¡ç†ï¼ˆConversation Memoryï¼‰
- ğŸ¯ è´¨é‡è¯„ä¼°åæ€ï¼ˆQuality Evaluationï¼‰

---

### 3.1 æ•´ä½“æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (Next.js + React)               â”‚
â”‚                    AgentTerminal Component                  â”‚
â”‚                    - ç»ˆç«¯å¼äº¤äº’ç•Œé¢                           â”‚
â”‚                    - StepVisualization æ­¥éª¤å¯è§†åŒ–            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Next.js API Layer (Proxy)                â”‚
â”‚                    /api/agent/execute                       â”‚
â”‚                    - è¯·æ±‚è½¬å‘å’ŒéªŒè¯                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Python Backend (FastAPI)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ReactAgent (ReAct æ‰§è¡Œå™¨)                            â”‚   â”‚
â”‚  â”‚  - åè°ƒ ReAct å¾ªç¯æ‰§è¡Œï¼ˆæœ€å¤š 5 æ¬¡è¿­ä»£ï¼‰                  â”‚   â”‚
â”‚  â”‚  - ç®¡ç†è¿­ä»£çŠ¶æ€å’Œå†å²                                   â”‚   â”‚
â”‚  â”‚  - åˆæˆæœ€ç»ˆå“åº”                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  TaskPlanner (ä»»åŠ¡è§„åˆ’å™¨)                              â”‚   â”‚
â”‚  â”‚  - åˆ†ææŸ¥è¯¢å¤æ‚åº¦ï¼ˆç®€å•/ä¸­ç­‰/å¤æ‚ï¼‰                       â”‚   â”‚
â”‚  â”‚  - åˆ†è§£å¤æ‚æŸ¥è¯¢ä¸ºå­ä»»åŠ¡                                 â”‚   â”‚
â”‚  â”‚  - ä¼°è®¡è¿­ä»£æ¬¡æ•°                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ToolOrchestrator (å·¥å…·ç¼–æ’å™¨)                        â”‚   â”‚
â”‚  â”‚  - æ‰§è¡Œå·¥å…·é“¾                                         â”‚   â”‚
â”‚  â”‚  - è§£æå‚æ•°å¼•ç”¨ï¼ˆ${step1.result}ï¼‰                     â”‚   â”‚
â”‚  â”‚  - ç¼“å­˜å·¥å…·ç»“æœï¼ˆ5 åˆ†é’Ÿ TTLï¼‰                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ConversationMemory (ä¼šè¯è®°å¿†)                        â”‚   â”‚
â”‚  â”‚  - PostgreSQL æŒä¹…åŒ–å­˜å‚¨                              â”‚   â”‚
â”‚  â”‚  - å¯¹è¯å†å²æ£€ç´¢ï¼ˆæœ€è¿‘ 10 æ¡ï¼‰                          â”‚   â”‚
â”‚  â”‚  - é•¿å¯¹è¯è‡ªåŠ¨æ‘˜è¦                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  LLM Service (LLM æœåŠ¡å±‚)                             â”‚   â”‚
â”‚  â”‚  - Google Gemini 2.0 Flash (æ¨ç†ç”Ÿæˆã€å“åº”åˆæˆ)        â”‚   â”‚
â”‚  â”‚  - ä»»åŠ¡è§„åˆ’ã€ReAct è¿­ä»£ã€è´¨é‡è¯„ä¼°                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ ¸å¿ƒè®¾è®¡æ¨¡å¼

#### ReAct æ¨ç†å¾ªç¯
**è®¾è®¡ç†å¿µ**ï¼šé€šè¿‡äº¤æ›¿è¿›è¡Œæ¨ç†ï¼ˆThoughtï¼‰å’Œè¡ŒåŠ¨ï¼ˆActionï¼‰æ¥è§£å†³å¤æ‚ä»»åŠ¡

```python
@dataclass
class ReActStep:
    step_number: int          # æ­¥éª¤ç¼–å·
    thought: str              # Agent çš„æ€è€ƒè¿‡ç¨‹
    action: ToolCall          # é€‰æ‹©çš„å·¥å…·è°ƒç”¨
    observation: ToolResult   # å·¥å…·æ‰§è¡Œç»“æœ
    status: str              # pending | running | completed | failed
    timestamp: datetime       # æ—¶é—´æˆ³
```

**ä¼˜åŠ¿**ï¼š
- æ”¯æŒå¤šæ­¥æ¨ç†ï¼Œå¤„ç†å¤æ‚ä»»åŠ¡
- è‡ªæˆ‘åæ€å’Œè´¨é‡è¯„ä¼°
- é€æ˜çš„æ¨ç†è¿‡ç¨‹

#### åˆ†å±‚æ¶æ„
**è®¾è®¡ç†å¿µ**ï¼šåŸºäºèŒè´£åˆ†ç¦»çš„åˆ†å±‚æ¶æ„

```python
# æ‰§è¡Œå±‚
class ReactAgent:
    async def execute(query, session_id) -> ReactResponse

# è§„åˆ’å±‚
class TaskPlanner:
    async def create_plan(query, history) -> ExecutionPlan

# ç¼–æ’å±‚
class ToolOrchestrator:
    async def execute_tool(tool_call) -> ToolResult

# è®°å¿†å±‚
class ConversationMemory:
    async def get_history(session_id) -> List[ConversationTurn]
```

**ä¼˜åŠ¿**ï¼š
- åŠŸèƒ½æ¨¡å—åŒ–ï¼ŒèŒè´£æ¸…æ™°
- æ˜“äºæ·»åŠ æ–°åŠŸèƒ½
- æ”¯æŒçƒ­æ’æ‹”

---

## å››ã€å·¥ä½œæµç¨‹

### ğŸ’¬ å£å¤´è¡¨è¿°ç‰ˆæœ¬ï¼ˆ2åˆ†é’Ÿï¼‰
> "æˆ‘ç”¨ä¸€ä¸ªå…·ä½“ä¾‹å­è¯´æ˜ ReAct å·¥ä½œæµç¨‹ã€‚
> 
> ç”¨æˆ·é—®ï¼š'åˆ†ææœ€è¿‘ OpenAI çš„æŠ€æœ¯è¿›å±•'
> 
> **ç¬¬ä¸€æ­¥ï¼šåŠ è½½ä¼šè¯å†å²**
> ç³»ç»Ÿä» PostgreSQL åŠ è½½æœ€è¿‘ 10 æ¡å¯¹è¯ï¼Œå¦‚æœå¯¹è¯å¤ªé•¿ä¼šç”Ÿæˆæ‘˜è¦ã€‚è¿™æ · Agent èƒ½ç†è§£ä¸Šä¸‹æ–‡ã€‚
> 
> **ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ‰§è¡Œè®¡åˆ’**
> TaskPlanner åˆ†ææŸ¥è¯¢ï¼Œåˆ¤æ–­å¤æ‚åº¦ä¸º mediumï¼Œåˆ†è§£ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š
> 1. æœç´¢ OpenAI ç›¸å…³æ–°é—»
> 2. åˆ†ææŠ€æœ¯è¶‹åŠ¿
> é¢„è®¡éœ€è¦ 2 æ¬¡è¿­ä»£ã€‚
> 
> **ç¬¬ä¸‰æ­¥ï¼šReAct å¾ªç¯**
> - è¿­ä»£ 1ï¼š
>   - Thought: 'é¦–å…ˆéœ€è¦è·å– OpenAI çš„æœ€æ–°æ–°é—»'
>   - Action: search_news(query='OpenAI', count=10)
>   - Observation: 'æ‰¾åˆ° 10 ç¯‡ç›¸å…³æ–°é—»'
> 
> - è¿­ä»£ 2ï¼š
>   - Thought: 'ç°åœ¨éœ€è¦åˆ†æè¿™äº›æ–°é—»çš„æŠ€æœ¯è¶‹åŠ¿'
>   - Action: analyze_trends(articles=[...])
>   - Observation: 'è¯†åˆ«å‡º 3 ä¸ªä¸»è¦æŠ€æœ¯è¶‹åŠ¿'
> 
> **ç¬¬å››æ­¥ï¼šåˆæˆå“åº”**
> LLM ä»æ‰§è¡Œå†å²ç”Ÿæˆè‡ªç„¶è¯­è¨€å“åº”ï¼ŒåŒ…å«æ‰€æœ‰å…³é”®ä¿¡æ¯ã€‚
> 
> **ç¬¬äº”æ­¥ï¼šè´¨é‡è¯„ä¼°**
> ç³»ç»Ÿè‡ªæˆ‘è¯„ä¼°ï¼šå®Œæ•´æ€§ 9/10ï¼Œè´¨é‡ 8/10ï¼Œä¸éœ€è¦é‡è¯•ã€‚
> 
> **ç¬¬å…­æ­¥ï¼šä¿å­˜å†å²**
> æ•´ä¸ªå¯¹è¯ä¿å­˜åˆ°æ•°æ®åº“ï¼Œä¾›åç»­æŸ¥è¯¢ä½¿ç”¨ã€‚
> 
> æ•´ä¸ªè¿‡ç¨‹ 5-8 ç§’å®Œæˆï¼Œç”¨æˆ·çœ‹åˆ°çš„æ˜¯å®Œæ•´çš„æ¨ç†è¿‡ç¨‹å’Œæœ€ç»ˆç­”æ¡ˆã€‚"

**æ€§èƒ½æ•°æ®**ï¼š
- âš¡ ç®€å•æŸ¥è¯¢ï¼ˆ1 æ¬¡è¿­ä»£ï¼‰ï¼š< 2s
- ğŸ§  ä¸­ç­‰æŸ¥è¯¢ï¼ˆ2-3 æ¬¡è¿­ä»£ï¼‰ï¼š5-8s
- ğŸ”¥ å¤æ‚æŸ¥è¯¢ï¼ˆ4-5 æ¬¡è¿­ä»£ï¼‰ï¼š< 10s
- ğŸ’¾ æ•°æ®åº“æŸ¥è¯¢ï¼š< 100ms

---

### 4.1 å®Œæ•´æ‰§è¡Œæµç¨‹å›¾

```
ç”¨æˆ·æŸ¥è¯¢: "åˆ†ææœ€è¿‘ OpenAI çš„æŠ€æœ¯è¿›å±•"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åŠ è½½ä¼šè¯å†å² (ConversationMemory)                    â”‚
â”‚    - ä» PostgreSQL åŠ è½½æœ€è¿‘ 10 æ¡å¯¹è¯                   â”‚
â”‚    - å¦‚æœå¯¹è¯è¿‡é•¿ï¼Œç”Ÿæˆæ‘˜è¦                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. åˆ›å»ºæ‰§è¡Œè®¡åˆ’ (TaskPlanner)                           â”‚
â”‚    - å¤æ‚åº¦: medium                                      â”‚
â”‚    - æ­¥éª¤ 1: æœç´¢ OpenAI ç›¸å…³æ–°é—»                        â”‚
â”‚    - æ­¥éª¤ 2: åˆ†ææŠ€æœ¯è¶‹åŠ¿                                â”‚
â”‚    - é¢„è®¡è¿­ä»£: 2 æ¬¡                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ReAct å¾ªç¯ - è¿­ä»£ 1                                  â”‚
â”‚    Thought: "é¦–å…ˆéœ€è¦è·å– OpenAI çš„æœ€æ–°æ–°é—»..."         â”‚
â”‚    Action: search_news(query="OpenAI", count=10)        â”‚
â”‚    Observation: "æ‰¾åˆ° 10 ç¯‡ç›¸å…³æ–°é—»..."                  â”‚
â”‚    Status: completed                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ReAct å¾ªç¯ - è¿­ä»£ 2                                  â”‚
â”‚    Thought: "ç°åœ¨éœ€è¦åˆ†æè¿™äº›æ–°é—»çš„æŠ€æœ¯è¶‹åŠ¿..."         â”‚
â”‚    Action: analyze_trends(articles=[...])               â”‚
â”‚    Observation: "è¯†åˆ«å‡º 3 ä¸ªä¸»è¦æŠ€æœ¯è¶‹åŠ¿..."             â”‚
â”‚    Status: completed                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. åˆæˆæœ€ç»ˆå“åº” (LLM)                                   â”‚
â”‚    - ä»æ‰§è¡Œå†å²ç”Ÿæˆè‡ªç„¶è¯­è¨€å“åº”                          â”‚
â”‚    - åŒ…å«æ‰€æœ‰å…³é”®ä¿¡æ¯å’Œåˆ†æç»“æœ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. è´¨é‡è¯„ä¼° (ReflectionEngine)                          â”‚
â”‚    - å®Œæ•´æ€§è¯„åˆ†: 9/10                                    â”‚
â”‚    - è´¨é‡è¯„åˆ†: 8/10                                      â”‚
â”‚    - éœ€è¦é‡è¯•: false                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. ä¿å­˜åˆ°ä¼šè¯å†å² (ConversationMemory)                  â”‚
â”‚    - å­˜å‚¨åˆ° PostgreSQL                                   â”‚
â”‚    - æ›´æ–°ä¼šè¯æ‘˜è¦                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
è¿”å›å®Œæ•´å“åº”ç»™ç”¨æˆ·
```

### 4.2 è¿­ä»£ç»ˆæ­¢æ¡ä»¶

ReAct å¾ªç¯åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ç»ˆæ­¢ï¼š

1. **è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°**ï¼š5 æ¬¡è¿­ä»£
2. **ä»»åŠ¡å®Œæˆ**ï¼šè´¨é‡è¯„ä¼°è®¤ä¸ºå“åº”å·²å®Œæ•´
3. **å·¥å…·å¤±è´¥**ï¼šå¿…éœ€å·¥å…·æ‰§è¡Œå¤±è´¥ä¸”æ— æ³•æ¢å¤
4. **è¶…æ—¶**ï¼šæ€»æ‰§è¡Œæ—¶é—´è¶…è¿‡ 30 ç§’

---

## 4.3 SSE æµå¼è¾“å‡ºå·¥ä½œæµç¨‹

### ğŸ’¬ å£å¤´è¡¨è¿°ç‰ˆæœ¬ï¼ˆ2åˆ†é’Ÿï¼‰
> "ç³»ç»Ÿå®ç°äº†**çœŸæ­£çš„ SSEï¼ˆServer-Sent Eventsï¼‰æµå¼è¾“å‡º**ï¼Œè®©ç”¨æˆ·èƒ½å®æ—¶çœ‹åˆ° Agent çš„æ€è€ƒè¿‡ç¨‹ã€‚
> 
> **å·¥ä½œåŸç†**ï¼šå‰ç«¯ä½¿ç”¨ EventSource å»ºç«‹æŒä¹…è¿æ¥ï¼Œåç«¯é€šè¿‡ FastAPI çš„ StreamingResponse é€æ­¥å‘é€äº‹ä»¶ã€‚æ¯ä¸ª ReAct è¿­ä»£çš„ä¸‰ä¸ªé˜¶æ®µï¼ˆæ€è€ƒã€è¡ŒåŠ¨ã€è§‚å¯Ÿï¼‰éƒ½ä¼šç«‹å³å‘é€ç»™å‰ç«¯ï¼Œä¸éœ€è¦ç­‰å¾…æ•´ä¸ªæ‰§è¡Œå®Œæˆã€‚
> 
> **å…³é”®æŠ€æœ¯ç‚¹**ï¼š
> 1. **å¼‚æ­¥é˜Ÿåˆ—**ï¼šåç«¯ä½¿ç”¨ asyncio.Queue åœ¨ ReAct æ‰§è¡Œå’Œ SSE å‘é€ä¹‹é—´ä¼ é€’äº‹ä»¶
> 2. **å›è°ƒæœºåˆ¶**ï¼šReactAgent æ¥å— streaming_callback å‚æ•°ï¼Œåœ¨å…³é”®èŠ‚ç‚¹è°ƒç”¨å›è°ƒ
> 3. **æˆ˜ç•¥æ€§å»¶è¿Ÿ**ï¼šæ¯ä¸ªäº‹ä»¶åæ·»åŠ  300ms å»¶è¿Ÿï¼Œç¡®ä¿ç”¨æˆ·èƒ½çœ‹åˆ°æ¸è¿›å¼æ›´æ–°
> 4. **çŠ¶æ€åŒæ­¥**ï¼šå‰ç«¯ä½¿ç”¨ Ref è§£å†³é—­åŒ…é—®é¢˜ï¼Œç¡®ä¿ complete äº‹ä»¶èƒ½è·å–æœ€æ–°æ­¥éª¤
> 5. **æ‰“å­—æœºæ•ˆæœ**ï¼šå“åº”å†…å®¹åˆ†å—å‘é€ï¼ˆ20 å­—ç¬¦/å—ï¼Œ50ms å»¶è¿Ÿï¼‰ï¼Œæ¨¡æ‹Ÿ ChatGPT æ•ˆæœ
> 
> **ç”¨æˆ·ä½“éªŒ**ï¼šç”¨æˆ·èƒ½çœ‹åˆ° Agent ä¸€æ­¥æ­¥æ€è€ƒã€é€‰æ‹©å·¥å…·ã€æ‰§è¡Œè¡ŒåŠ¨ã€è§‚å¯Ÿç»“æœï¼Œæœ€åé€å­—æ˜¾ç¤ºå“åº”å†…å®¹ã€‚æ•´ä¸ªè¿‡ç¨‹é€æ˜å¯è§ï¼Œå¢å¼ºäº†ä¿¡ä»»æ„Ÿã€‚"

**æ€§èƒ½æ•°æ®**ï¼š
- ğŸ“¡ SSE è¿æ¥å»¶è¿Ÿï¼š< 50ms
- âš¡ äº‹ä»¶ä¼ è¾“å»¶è¿Ÿï¼š< 100ms
- ğŸ¬ æ‰“å­—æœºæ•ˆæœï¼š20 å­—ç¬¦/50ms
- ğŸ”„ æ€»ä½“å»¶è¿Ÿï¼šçº¦ 1.6sï¼ˆ2 æ¬¡è¿­ä»£ï¼‰

---

### 4.3.1 SSE æµå¼æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (React)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  useAgent Hook                                        â”‚   â”‚
â”‚  â”‚  - EventSource è¿æ¥ç®¡ç†                               â”‚   â”‚
â”‚  â”‚  - äº‹ä»¶ç›‘å¬å’ŒçŠ¶æ€æ›´æ–°                                  â”‚   â”‚
â”‚  â”‚  - streamingSteps çŠ¶æ€ + Ref                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“ SSE Events                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  AgentTerminal Component                              â”‚   â”‚
â”‚  â”‚  - å®æ—¶æ˜¾ç¤ºæµå¼æ­¥éª¤                                    â”‚   â”‚
â”‚  â”‚  - StepVisualization ç»„ä»¶                             â”‚   â”‚
â”‚  â”‚  - æ‰“å­—æœºæ•ˆæœå“åº”å†…å®¹                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†‘ EventSource
                            â”‚ GET /api/agent/stream
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Python Backend (FastAPI)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  /api/agent/stream Endpoint                           â”‚   â”‚
â”‚  â”‚  - StreamingResponse                                  â”‚   â”‚
â”‚  â”‚  - event_generator() å¼‚æ­¥ç”Ÿæˆå™¨                       â”‚   â”‚
â”‚  â”‚  - asyncio.Queue äº‹ä»¶é˜Ÿåˆ—                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“ streaming_callback             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ReactAgent                                           â”‚   â”‚
â”‚  â”‚  - execute() æ¥å— streaming_callback                  â”‚   â”‚
â”‚  â”‚  - _react_loop() ä¼ é€’ callback                        â”‚   â”‚
â”‚  â”‚  - _react_iteration() è°ƒç”¨ callback                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“ å›è°ƒè§¦å‘ç‚¹                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Callback Trigger Points                              â”‚   â”‚
â”‚  â”‚  1. Thought ç”Ÿæˆå â†’ callback("thought", {...})       â”‚   â”‚
â”‚  â”‚  2. Action é€‰æ‹©å â†’ callback("action", {...})         â”‚   â”‚
â”‚  â”‚  3. Observation å®Œæˆå â†’ callback("observation", {...})â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3.2 åç«¯æµå¼å®ç°

#### æ ¸å¿ƒç»„ä»¶

**1. StreamingResponse ç«¯ç‚¹**
```python
@router.get("/stream")
async def stream_execution(input: str, session_id: str = "default"):
    """SSE æµå¼æ‰§è¡Œç«¯ç‚¹"""
    from fastapi.responses import StreamingResponse
    import json
    import asyncio
    
    # åˆ›å»ºå¼‚æ­¥é˜Ÿåˆ—ç”¨äºäº‹ä»¶ä¼ é€’
    event_queue = asyncio.Queue()
    
    async def streaming_callback(event_type: str, event_data: Dict[str, Any]):
        """ReactAgent è°ƒç”¨çš„å›è°ƒå‡½æ•°"""
        await event_queue.put({
            "type": event_type,
            "data": event_data,
            "timestamp": datetime.now().isoformat()
        })
    
    async def event_generator():
        """ç”Ÿæˆ SSE äº‹ä»¶æµ"""
        try:
            # å‘é€å¼€å§‹äº‹ä»¶
            yield f"data: {json.dumps({'type': 'start'})}\n\n"
            
            # åˆ›å»º ReactAgent æ‰§è¡Œä»»åŠ¡ï¼ˆåå°è¿è¡Œï¼‰
            execution_task = asyncio.create_task(
                react_agent.execute(
                    query=input,
                    session_id=session_id,
                    streaming_callback=streaming_callback
                )
            )
            
            # å®æ—¶æµå¼å‘é€äº‹ä»¶
            while not execution_task.done():
                try:
                    event = await asyncio.wait_for(
                        event_queue.get(), 
                        timeout=0.1
                    )
                    yield f"data: {json.dumps(event)}\n\n"
                except asyncio.TimeoutError:
                    continue
            
            # è·å–æœ€ç»ˆç»“æœ
            react_response = await execution_task
            
            # æ¸…ç©ºé˜Ÿåˆ—ä¸­å‰©ä½™äº‹ä»¶
            while not event_queue.empty():
                event = await event_queue.get()
                yield f"data: {json.dumps(event)}\n\n"
            
            # é€å­—å‘é€å“åº”å†…å®¹ï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰
            response_text = react_response.response
            chunk_size = 20  # æ¯æ¬¡ 20 å­—ç¬¦
            
            for i in range(0, len(response_text), chunk_size):
                chunk = response_text[i:i + chunk_size]
                yield f"data: {json.dumps({
                    'type': 'response_chunk',
                    'chunk': chunk
                })}\n\n"
                await asyncio.sleep(0.05)  # 50ms å»¶è¿Ÿ
            
            # å‘é€å®Œæˆäº‹ä»¶
            yield f"data: {json.dumps({
                'type': 'complete',
                'evaluation': react_response.evaluation.to_dict()
            })}\n\n"
            
        except Exception as e:
            yield f"data: {json.dumps({
                'type': 'error',
                'error': str(e)
            })}\n\n"
    
    return StreamingResponse(
        event_generator(),
        media_type="text/event-stream",
        headers={
            "Cache-Control": "no-cache",
            "Connection": "keep-alive",
            "X-Accel-Buffering": "no"
        }
    )
```

**2. ReactAgent å›è°ƒé›†æˆ**
```python
class ReactAgent:
    async def _react_iteration(
        self,
        query: str,
        plan: ExecutionPlan,
        history: List[ReActStep],
        context: Dict[str, Any],
        iteration: int,
        streaming_callback: Optional[Any] = None
    ) -> ReActStep:
        """æ‰§è¡Œå•æ¬¡ ReAct è¿­ä»£ï¼Œæ”¯æŒæµå¼å›è°ƒ"""
        
        # 1. ç”Ÿæˆæ€è€ƒ
        thought, tool_call = await self._generate_thought_and_action(
            query, plan, history, context, iteration
        )
        
        # æµå¼å‘é€æ€è€ƒäº‹ä»¶
        if streaming_callback:
            await streaming_callback("thought", {
                "step_number": iteration,
                "content": thought
            })
            await asyncio.sleep(0.3)  # 300ms å»¶è¿Ÿ
        
        # 2. é€‰æ‹©è¡ŒåŠ¨
        # æµå¼å‘é€è¡ŒåŠ¨äº‹ä»¶
        if streaming_callback:
            await streaming_callback("action", {
                "step_number": iteration,
                "tool_name": tool_call.tool_name,
                "parameters": tool_call.parameters
            })
            await asyncio.sleep(0.3)  # 300ms å»¶è¿Ÿ
        
        # 3. æ‰§è¡Œå·¥å…·
        observation = await self._execute_action(tool_call)
        
        # æµå¼å‘é€è§‚å¯Ÿäº‹ä»¶
        if streaming_callback:
            await streaming_callback("observation", {
                "step_number": iteration,
                "success": observation.is_success(),
                "data": observation.data,
                "error": observation.error
            })
            await asyncio.sleep(0.3)  # 300ms å»¶è¿Ÿ
        
        # 4. åˆ›å»ºæ­¥éª¤
        return ReActStep(
            step_number=iteration,
            thought=thought,
            action=tool_call,
            observation=observation,
            status="completed" if observation.is_success() else "failed"
        )
```

**3. æˆ˜ç•¥æ€§å»¶è¿Ÿè®¾è®¡**
```python
# æ¯ä¸ªäº‹ä»¶åå»¶è¿Ÿ 300ms
await streaming_callback("thought", {...})
await asyncio.sleep(0.3)

# è¿­ä»£ä¹‹é—´å»¶è¿Ÿ 200ms
if iteration < self.MAX_ITERATIONS:
    await asyncio.sleep(0.2)

# å“åº”åˆ†å—å»¶è¿Ÿ 50ms
for chunk in chunks:
    yield chunk
    await asyncio.sleep(0.05)
```

**å»¶è¿Ÿè®¾è®¡åŸç†**ï¼š
- **300ms äº‹ä»¶å»¶è¿Ÿ**ï¼šäººçœ¼èƒ½æ¸…æ¥šæ„ŸçŸ¥çš„æœ€å°æ—¶é—´é—´éš”
- **200ms è¿­ä»£å»¶è¿Ÿ**ï¼šè®©ç”¨æˆ·çœ‹åˆ°å®Œæ•´çš„"æ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿ"å¾ªç¯
- **50ms åˆ†å—å»¶è¿Ÿ**ï¼šæ‰“å­—æœºæ•ˆæœçš„æœ€ä½³é€Ÿåº¦
- **é¿å… React æ‰¹å¤„ç†**ï¼šå»¶è¿Ÿè¶³å¤Ÿé•¿ï¼ŒReact ä¸ä¼šæ‰¹é‡æ›´æ–°

### 4.3.3 å‰ç«¯æµå¼å®ç°

#### æ ¸å¿ƒç»„ä»¶

**useAgent Hook - EventSource ç®¡ç†**
```typescript
export function useAgent() {
  const [streamingSteps, setStreamingSteps] = useState<ReActStep[]>([]);
  const streamingStepsRef = useRef<ReActStep[]>([]);  // è§£å†³é—­åŒ…é—®é¢˜
  const eventSourceRef = useRef<EventSource | null>(null);

  const processCommand = useCallback(async (command: string) => {
    // é‡ç½®æµå¼æ­¥éª¤
    setStreamingSteps([]);
    streamingStepsRef.current = [];
    
    // å»ºç«‹ EventSource è¿æ¥
    const backendUrl = process.env.NEXT_PUBLIC_PYTHON_BACKEND_URL;
    const eventSource = new EventSource(
      `${backendUrl}/api/agent/stream?input=${encodeURIComponent(command)}`
    );
    eventSourceRef.current = eventSource;
    
    let currentStepNumber = 0;
    let currentStepData: Partial<ReActStep> = {};
    
    eventSource.onmessage = (event) => {
      const data = JSON.parse(event.data);
      
      switch (data.type) {
        case "thought":
          // æ”¶åˆ°æ€è€ƒäº‹ä»¶
          currentStepNumber = data.data.step_number;
          currentStepData = {
            step_number: currentStepNumber,
            thought: data.data.content,
            status: "running"
          };
          
          setStreamingSteps((prev) => {
            const newSteps = [...prev, currentStepData as ReActStep];
            streamingStepsRef.current = newSteps;  // åŒæ­¥æ›´æ–° ref
            return newSteps;
          });
          break;
        
        case "action":
          // æ”¶åˆ°è¡ŒåŠ¨äº‹ä»¶
          currentStepData.action = {
            tool_name: data.data.tool_name,
            parameters: data.data.parameters
          };
          
          setStreamingSteps((prev) => {
            const newSteps = prev.map((s) =>
              s.step_number === currentStepNumber
                ? { ...s, ...currentStepData }
                : s
            );
            streamingStepsRef.current = newSteps;
            return newSteps;
          });
          break;
        
        case "observation":
          // æ”¶åˆ°è§‚å¯Ÿäº‹ä»¶
          currentStepData.observation = {
            success: data.data.success,
            data: data.data.data,
            error: data.data.error
          };
          currentStepData.status = data.data.success ? "completed" : "failed";
          
          setStreamingSteps((prev) => {
            const newSteps = prev.map((s) =>
              s.step_number === currentStepNumber
                ? { ...s, ...currentStepData }
                : s
            );
            streamingStepsRef.current = newSteps;
            return newSteps;
          });
          break;
        
        case "response_chunk":
          // æ”¶åˆ°å“åº”ç‰‡æ®µï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰
          setMessages((prev) =>
            prev.map((msg) =>
              msg.id === streamingMessageId
                ? {
                    ...msg,
                    content: (msg.content || "") + data.chunk
                  }
                : msg
            )
          );
          break;
        
        case "complete":
          // æ‰§è¡Œå®Œæˆ
          eventSource.close();
          
          // ä½¿ç”¨ ref ä¸­çš„æœ€æ–°å€¼ï¼ˆè§£å†³é—­åŒ…é—®é¢˜ï¼‰
          const finalSteps = streamingStepsRef.current;
          
          setMessages((prev) =>
            prev.map((msg) =>
              msg.id === streamingMessageId
                ? {
                    ...msg,
                    status: "success",
                    steps: finalSteps,  // ä¿ç•™æ­¥éª¤
                    evaluation: data.evaluation
                  }
                : msg
            )
          );
          break;
      }
    };
  }, []);
  
  return { messages, streamingSteps, processCommand };
}
```

### 4.3.4 äº‹ä»¶æ—¶é—´çº¿

**å®Œæ•´æ‰§è¡Œçš„äº‹ä»¶åºåˆ—**ï¼ˆå‡è®¾ 2 æ¬¡è¿­ä»£ï¼‰ï¼š

```
æ—¶é—´    äº‹ä»¶ç±»å‹              æ•°æ®å†…å®¹
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0ms     start                 å¼€å§‹æ‰§è¡Œ
0ms     thought               step_number: 1, content: "é¦–å…ˆéœ€è¦..."
300ms   action                step_number: 1, tool_name: "search_news"
600ms   observation           step_number: 1, success: true, data: [...]
800ms   thought               step_number: 2, content: "ç°åœ¨éœ€è¦..."
1100ms  action                step_number: 2, tool_name: "analyze_trends"
1400ms  observation           step_number: 2, success: true, data: {...}
1600ms  response_chunk        chunk: "æ ¹æ®åˆ†æï¼ŒOpenAI"
1650ms  response_chunk        chunk: "æœ€è¿‘çš„æŠ€æœ¯è¿›å±•ä¸»è¦"
1700ms  response_chunk        chunk: "é›†ä¸­åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢"
...     response_chunk        ...ï¼ˆæ›´å¤šåˆ†å—ï¼‰
Xms     complete              evaluation: {...}
```

### 4.3.5 å…³é”®æŠ€æœ¯ç‚¹
@shanshan
**1. å¼‚æ­¥é˜Ÿåˆ—æ¨¡å¼**
```python
# åç«¯ï¼šç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼
event_queue = asyncio.Queue()

# ç”Ÿäº§è€…ï¼šReactAgent é€šè¿‡å›è°ƒæ”¾å…¥äº‹ä»¶
async def streaming_callback(event_type, event_data):
    await event_queue.put({"type": event_type, "data": event_data})

# æ¶ˆè´¹è€…ï¼ševent_generator ä»é˜Ÿåˆ—å–å‡ºå¹¶å‘é€
while not execution_task.done():
    event = await event_queue.get()
    yield f"data: {json.dumps(event)}\n\n"
```

**2. SSE åè®®è§„èŒƒ**
```python
# SSE æ¶ˆæ¯æ ¼å¼
yield f"data: {json.dumps(event)}\n\n"
#      ^^^^  ^^^^^^^^^^^^^^^^^^^^  ^^^^
#      å­—æ®µ  JSON æ•°æ®              åŒæ¢è¡Œç¬¦ï¼ˆå¿…éœ€ï¼‰

# SSE å“åº”å¤´
headers={
    "Cache-Control": "no-cache",      # ç¦ç”¨ç¼“å­˜
    "Connection": "keep-alive",       # ä¿æŒè¿æ¥
    "X-Accel-Buffering": "no"        # ç¦ç”¨ Nginx ç¼“å†²
}
```

**3. å‰ç«¯ EventSource API**
```typescript
// å»ºç«‹è¿æ¥
const eventSource = new EventSource(url);

// ç›‘å¬æ¶ˆæ¯
eventSource.onmessage = (event) => {
  const data = JSON.parse(event.data);
  // å¤„ç†äº‹ä»¶
};

// é”™è¯¯å¤„ç†
eventSource.onerror = (error) => {
  eventSource.close();
};

// æ‰‹åŠ¨å…³é—­
eventSource.close();
```

**4. React çŠ¶æ€æ›´æ–°ä¼˜åŒ–**
```typescript
// ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼Œç¡®ä¿åŸºäºæœ€æ–°çŠ¶æ€
setStreamingSteps((prev) => {
  const newSteps = [...prev, newStep];
  streamingStepsRef.current = newSteps;  // åŒæ­¥ ref
  return newSteps;
});

@shanshan
// é¿å…ç›´æ¥èµ‹å€¼ï¼ˆä¼šä¸¢å¤±ä¸­é—´çŠ¶æ€ï¼‰
// âŒ setStreamingSteps([...streamingSteps, newStep]);
// âœ… setStreamingSteps((prev) => [...prev, newStep]);
```

### 4.3.6 æ€§èƒ½ä¼˜åŒ–

**1. æˆ˜ç•¥æ€§å»¶è¿Ÿ**
- äº‹ä»¶é—´å»¶è¿Ÿï¼š300msï¼ˆç¡®ä¿å¯è§æ€§ï¼‰
- è¿­ä»£é—´å»¶è¿Ÿï¼š200msï¼ˆå®Œæ•´å¾ªç¯æ„ŸçŸ¥ï¼‰
- åˆ†å—å»¶è¿Ÿï¼š50msï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰

**2. ç½‘ç»œä¼˜åŒ–**
- ä½¿ç”¨ SSE è€Œé WebSocketï¼ˆå•å‘é€šä¿¡æ›´ç®€å•ï¼‰
- ç¦ç”¨ Nginx ç¼“å†²ï¼ˆX-Accel-Buffering: noï¼‰
- ä¿æŒè¿æ¥æ´»è·ƒï¼ˆConnection: keep-aliveï¼‰

**3. å‰ç«¯ä¼˜åŒ–**
- ä½¿ç”¨ Ref é¿å…é—­åŒ…é—®é¢˜
- å‡½æ•°å¼çŠ¶æ€æ›´æ–°ç¡®ä¿æœ€æ–°å€¼
- æ¡ä»¶æ¸²æŸ“å‡å°‘ä¸å¿…è¦çš„é‡ç»˜

### 4.3.7 ç”¨æˆ·ä½“éªŒ

**Before SSEï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰**ï¼š
```
ç”¨æˆ·è¾“å…¥ â†’ ç­‰å¾…... â†’ ä¸€æ¬¡æ€§æ˜¾ç¤ºæ‰€æœ‰ç»“æœ
         â³ 5-10ç§’é»‘ç›’ç­‰å¾…
```

**After SSEï¼ˆæµå¼è¾“å‡ºï¼‰**ï¼š
```
ç”¨æˆ·è¾“å…¥ â†’ ğŸ’­ æ€è€ƒä¸­... â†’ ğŸ”§ æ‰§è¡Œå·¥å…·... â†’ ğŸ“Š è§‚å¯Ÿç»“æœ... â†’ ğŸ“ ç”Ÿæˆå“åº”...
         âš¡ å®æ—¶åé¦ˆï¼Œé€æ˜å¯è§
```

**ç”¨æˆ·æ„ŸçŸ¥**ï¼š
- âœ… çŸ¥é“ Agent åœ¨åšä»€ä¹ˆ
- âœ… çœ‹åˆ°æ¨ç†è¿‡ç¨‹
- âœ… æ„Ÿè§‰å“åº”æ›´å¿«
- âœ… å¢å¼ºä¿¡ä»»æ„Ÿ

---

## äº”ã€æŠ€æœ¯äº®ç‚¹

### ğŸ’¬ å£å¤´è¡¨è¿°ç‰ˆæœ¬ï¼ˆ3åˆ†é’Ÿï¼‰
> "æˆ‘é‡ç‚¹è®² 6 ä¸ªæŠ€æœ¯äº®ç‚¹ï¼š
> 
> **1. ReAct æ¨ç†å¾ªç¯**
> è¿™æ˜¯æ ¸å¿ƒåˆ›æ–°ã€‚ä¸åŒäºä¼ ç»Ÿ Agent çš„å•æ¬¡å·¥å…·è°ƒç”¨ï¼ŒReAct Agent èƒ½å¤Ÿè¿›è¡Œå¤šæ­¥æ¨ç†ã€‚æ¯æ¬¡è¿­ä»£åŒ…å« Thoughtï¼ˆæ€è€ƒï¼‰ã€Actionï¼ˆè¡ŒåŠ¨ï¼‰ã€Observationï¼ˆè§‚å¯Ÿï¼‰ä¸‰ä¸ªé˜¶æ®µï¼Œæœ€å¤š 5 æ¬¡è¿­ä»£ã€‚æ¯”å¦‚åˆ†ææŠ€æœ¯è¶‹åŠ¿ï¼Œç¬¬ä¸€æ¬¡è¿­ä»£æœç´¢æ–°é—»ï¼Œç¬¬äºŒæ¬¡è¿­ä»£åˆ†ææ•°æ®ï¼Œç¬¬ä¸‰æ¬¡è¿­ä»£ç”ŸæˆæŠ¥å‘Šã€‚è¿™ç§å¤šæ­¥æ¨ç†èƒ½åŠ›è®© Agent èƒ½å¤Ÿå¤„ç†å¤æ‚ä»»åŠ¡ã€‚
> 
> **2. SSE æµå¼è¾“å‡º**
> å®ç°äº†çœŸæ­£çš„ Server-Sent Events æµå¼è¾“å‡ºï¼Œç”¨æˆ·èƒ½å®æ—¶çœ‹åˆ° Agent çš„æ€è€ƒè¿‡ç¨‹ã€‚ä½¿ç”¨å¼‚æ­¥é˜Ÿåˆ—åœ¨ ReAct æ‰§è¡Œå’Œ SSE å‘é€ä¹‹é—´ä¼ é€’äº‹ä»¶ï¼Œæ¯ä¸ªè¿­ä»£çš„æ€è€ƒã€è¡ŒåŠ¨ã€è§‚å¯Ÿéƒ½ç«‹å³å‘é€ç»™å‰ç«¯ã€‚é€šè¿‡æˆ˜ç•¥æ€§å»¶è¿Ÿï¼ˆ300ms/äº‹ä»¶ï¼‰ç¡®ä¿ç”¨æˆ·èƒ½çœ‹åˆ°æ¸è¿›å¼æ›´æ–°ã€‚å“åº”å†…å®¹é‡‡ç”¨æ‰“å­—æœºæ•ˆæœï¼ˆ20 å­—ç¬¦/50msï¼‰ï¼Œç±»ä¼¼ ChatGPTã€‚è¿™å¤§å¤§æå‡äº†ç”¨æˆ·ä½“éªŒå’Œä¿¡ä»»æ„Ÿã€‚
> 
> **3. æ™ºèƒ½ä»»åŠ¡è§„åˆ’**
> TaskPlanner ä¼šè‡ªåŠ¨åˆ†ææŸ¥è¯¢å¤æ‚åº¦ã€‚ç®€å•æŸ¥è¯¢ï¼ˆå¦‚'æœ€æ–°æ–°é—»'ï¼‰ç›´æ¥æ‰§è¡Œï¼Œä¸­ç­‰æŸ¥è¯¢ï¼ˆå¦‚'åˆ†æ OpenAI è¿›å±•'ï¼‰åˆ†è§£ä¸º 2-3 æ­¥ï¼Œå¤æ‚æŸ¥è¯¢ï¼ˆå¦‚'å¯¹æ¯”å¤šå®¶å…¬å¸'ï¼‰åˆ†è§£ä¸º 3+ æ­¥ã€‚è¿™ä¸ªè§„åˆ’å™¨ä½¿ç”¨ LLM ç†è§£æŸ¥è¯¢æ„å›¾ï¼Œè¯†åˆ«æ‰€éœ€å·¥å…·ï¼Œç¡®å®šæ‰§è¡Œé¡ºåºã€‚
> 
> **4. ä¼šè¯è®°å¿†ç®¡ç†**
> ç³»ç»Ÿä½¿ç”¨ PostgreSQL æŒä¹…åŒ–å­˜å‚¨å¯¹è¯å†å²ã€‚æ¯æ¬¡æŸ¥è¯¢å‰åŠ è½½æœ€è¿‘ 10 æ¡å¯¹è¯ï¼Œå¦‚æœå¯¹è¯å¤ªé•¿ä¼šè‡ªåŠ¨ç”Ÿæˆæ‘˜è¦ã€‚è¿™æ · Agent èƒ½å¤Ÿç†è§£ä¸Šä¸‹æ–‡ï¼Œè¿›è¡Œå¤šè½®å¯¹è¯ã€‚24 å°æ—¶æ— æ´»åŠ¨çš„ä¼šè¯è‡ªåŠ¨æ¸…ç†ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚
> 
> **5. å·¥å…·ç¼–æ’ç³»ç»Ÿ**
> ToolOrchestrator è´Ÿè´£æ‰§è¡Œå·¥å…·é“¾ã€‚å®ƒèƒ½å¤„ç†å·¥å…·é—´çš„ä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚ç¬¬äºŒä¸ªå·¥å…·éœ€è¦ç¬¬ä¸€ä¸ªå·¥å…·çš„ç»“æœã€‚æ”¯æŒå‚æ•°å¼•ç”¨è¯­æ³• ${step1.result}ï¼Œè‡ªåŠ¨è§£æå’Œä¼ é€’ã€‚è¿˜æœ‰ç»“æœç¼“å­˜ï¼Œ5 åˆ†é’Ÿå†…ç›¸åŒå·¥å…·è°ƒç”¨ç›´æ¥è¿”å›ç¼“å­˜ï¼Œé¿å…é‡å¤æ‰§è¡Œã€‚
> 
> **6. LLM æˆæœ¬ä¼˜åŒ–**
> é€‰æ‹© Gemini 2.0 Flash ä½œä¸ºä¸»åŠ›æ¨¡å‹ï¼Œæœˆæˆæœ¬ä»… 2-3 ç¾å…ƒã€‚é€šè¿‡å·¥å…·ç»“æœç¼“å­˜ã€å¯¹è¯æ‘˜è¦å‹ç¼©ã€æç¤ºè¯ä¼˜åŒ–ç­‰ç­–ç•¥ï¼Œå°† token ä½¿ç”¨é‡é™ä½ 40%ã€‚ç›¸æ¯” GPT-4ï¼Œæˆæœ¬é™ä½ 95%ï¼Œä½†åŠŸèƒ½å®Œå…¨æ»¡è¶³éœ€æ±‚ã€‚"

**å¯æ·±å…¥è®¨è®ºçš„ç‚¹**ï¼š
- ReAct å¾ªç¯çš„å®ç°ç»†èŠ‚ï¼ˆçŠ¶æ€ç®¡ç†ã€è¿­ä»£æ§åˆ¶ï¼‰
- SSE æµå¼è¾“å‡ºçš„æ¶æ„è®¾è®¡ï¼ˆå¼‚æ­¥é˜Ÿåˆ—ã€å›è°ƒæœºåˆ¶ã€å»¶è¿Ÿç­–ç•¥ï¼‰
- ä»»åŠ¡è§„åˆ’çš„å¤æ‚åº¦åˆ†ç±»ç®—æ³•
- ä¼šè¯è®°å¿†çš„å‹ç¼©å’Œæ‘˜è¦ç­–ç•¥
- å·¥å…·ç¼–æ’çš„ä¾èµ–è§£ææœºåˆ¶
- LLM æˆæœ¬ä¼˜åŒ–çš„å…·ä½“æªæ–½

---

### 5.1 ReAct æ¨ç†å¾ªç¯å®ç°

**æ ¸å¿ƒè®¾è®¡**ï¼š
```python
async def _react_loop(query, plan, context):
    steps = []
    for iteration in range(1, MAX_ITERATIONS + 1):
        # 1. Thought: LLM ç”Ÿæˆæ¨ç†
        thought = await llm.generate_thought(query, plan, steps)
        
        # 2. Action: é€‰æ‹©å·¥å…·å’Œå‚æ•°
        action = await llm.select_action(thought, available_tools)
        
        # 3. Execute: æ‰§è¡Œå·¥å…·
        observation = await tool_orchestrator.execute(action)
        
        # 4. Record: è®°å½•æ­¥éª¤
        steps.append(ReActStep(iteration, thought, action, observation))
        
        # 5. Reflect: åˆ¤æ–­æ˜¯å¦ç»§ç»­
        if should_terminate(steps, plan):
            break
    
    return steps
```

**å…³é”®ç‰¹æ€§**ï¼š
- æœ€å¤š 5 æ¬¡è¿­ä»£ï¼Œé¿å…æ— é™å¾ªç¯
- æ¯æ¬¡è¿­ä»£éƒ½æœ‰å®Œæ•´çš„æ¨ç†è½¨è¿¹
- æ”¯æŒä¸­é€”ç»ˆæ­¢ï¼ˆä»»åŠ¡å®Œæˆæˆ–å¤±è´¥ï¼‰
- æ‰€æœ‰æ­¥éª¤å¯è¿½æº¯å’Œå¯è§†åŒ–

### 5.2 æ™ºèƒ½ä»»åŠ¡è§„åˆ’

**å¤æ‚åº¦åˆ†ç±»ç®—æ³•**ï¼š
```python
def classify_complexity(query: str) -> str:
    # ä½¿ç”¨ LLM åˆ†ææŸ¥è¯¢ç‰¹å¾
    features = {
        'has_comparison': 'å¯¹æ¯”' in query or 'æ¯”è¾ƒ' in query,
        'has_analysis': 'åˆ†æ' in query or 'è¶‹åŠ¿' in query,
        'has_multiple_entities': count_entities(query) > 1,
        'requires_aggregation': 'æ€»ç»“' in query or 'æ±‡æ€»' in query
    }
    
    if sum(features.values()) >= 3:
        return 'complex'  # 3+ ç‰¹å¾ â†’ å¤æ‚
    elif sum(features.values()) >= 1:
        return 'medium'   # 1-2 ç‰¹å¾ â†’ ä¸­ç­‰
    else:
        return 'simple'   # 0 ç‰¹å¾ â†’ ç®€å•
```

**ä»»åŠ¡åˆ†è§£ç¤ºä¾‹**ï¼š
```
æŸ¥è¯¢: "åˆ†ææœ€è¿‘ OpenAI å’Œ Anthropic çš„æŠ€æœ¯è¿›å±•å¹¶å¯¹æ¯”"
å¤æ‚åº¦: complex
æ­¥éª¤:
  1. æœç´¢ OpenAI ç›¸å…³æ–°é—» (å¿…éœ€)
  2. æœç´¢ Anthropic ç›¸å…³æ–°é—» (å¿…éœ€)
  3. åˆ†æ OpenAI æŠ€æœ¯è¶‹åŠ¿ (å¿…éœ€)
  4. åˆ†æ Anthropic æŠ€æœ¯è¶‹åŠ¿ (å¿…éœ€)
  5. å¯¹æ¯”ä¸¤å®¶å…¬å¸çš„è¿›å±• (å¿…éœ€)
é¢„è®¡è¿­ä»£: 5 æ¬¡
```

### 5.3 ä¼šè¯è®°å¿†ç®¡ç†

**å­˜å‚¨ç­–ç•¥**ï¼š
```python
class ConversationMemory:
    async def get_history(session_id: str, limit: int = 10):
        # 1. æŸ¥è¯¢æœ€è¿‘ N æ¡å¯¹è¯
        recent = await db.query(
            "SELECT * FROM agent_conversations "
            "WHERE session_id = $1 "
            "ORDER BY created_at DESC LIMIT $2",
            session_id, limit
        )
        
        # 2. å¦‚æœå¯¹è¯è¿‡é•¿ï¼Œç”Ÿæˆæ‘˜è¦
        if len(recent) >= limit:
            summary = await generate_summary(session_id)
            return [summary] + recent[:limit-1]
        
        return recent
```

**æ‘˜è¦ç”Ÿæˆ**ï¼š
- è§¦å‘æ¡ä»¶ï¼šå¯¹è¯è½®æ¬¡ > 10
- æ‘˜è¦å†…å®¹ï¼šå…³é”®ä¸»é¢˜ã€é‡è¦ä¿¡æ¯ã€ç”¨æˆ·åå¥½
- æ›´æ–°é¢‘ç‡ï¼šæ¯ 5 è½®å¯¹è¯æ›´æ–°ä¸€æ¬¡
- Token èŠ‚çœï¼šçº¦ 60%

### 5.4 å·¥å…·ç¼–æ’ç³»ç»Ÿ

**å‚æ•°å¼•ç”¨è§£æ**ï¼š
```python
def resolve_parameters(params: Dict, previous_results: List):
    """è§£æå‚æ•°ä¸­çš„å¼•ç”¨ï¼Œå¦‚ ${step1.result}"""
    resolved = {}
    for key, value in params.items():
        if isinstance(value, str) and value.startswith('${'):
            # æå–å¼•ç”¨ï¼š${step1.result} â†’ step=1, field=result
            step_num, field = parse_reference(value)
            resolved[key] = previous_results[step_num-1].data[field]
        else:
            resolved[key] = value
    return resolved
```

**å·¥å…·ç»“æœç¼“å­˜**ï¼š
```python
class ToolOrchestrator:
    def __init__(self):
        self.cache = {}  # {cache_key: (result, timestamp)}
        self.cache_ttl = 300  # 5 åˆ†é’Ÿ
    
    async def execute_tool(self, tool_call: ToolCall):
        # 1. ç”Ÿæˆç¼“å­˜é”®
        cache_key = hash(tool_call.name + str(tool_call.parameters))
        
        # 2. æ£€æŸ¥ç¼“å­˜
        if cache_key in self.cache:
            result, timestamp = self.cache[cache_key]
            if time.time() - timestamp < self.cache_ttl:
                return result  # ç¼“å­˜å‘½ä¸­
        
        # 3. æ‰§è¡Œå·¥å…·
        result = await execute(tool_call)
        
        # 4. æ›´æ–°ç¼“å­˜
        self.cache[cache_key] = (result, time.time())
        return result
```

**ç¼“å­˜æ•ˆæœ**ï¼š
- å‘½ä¸­ç‡ï¼šçº¦ 30%
- å“åº”æ—¶é—´ï¼šä» 2s é™è‡³ < 100ms
- æˆæœ¬èŠ‚çœï¼šçº¦ 30%

### 5.5 LLM æˆæœ¬ä¼˜åŒ–

**ä¼˜åŒ–ç­–ç•¥**ï¼š

| ç­–ç•¥ | æ–¹æ³• | æ•ˆæœ |
|------|------|------|
| æ¨¡å‹é€‰æ‹© | Gemini 2.0 Flash | æˆæœ¬é™ä½ 95% vs GPT-4 |
| æç¤ºè¯ä¼˜åŒ– | ç²¾ç®€æç¤ºè¯ï¼Œå‡å°‘ç¤ºä¾‹ | Token å‡å°‘ 20% |
| ç»“æœç¼“å­˜ | å·¥å…·ç»“æœç¼“å­˜ 5 åˆ†é’Ÿ | é‡å¤è°ƒç”¨å‡å°‘ 30% |
| å¯¹è¯æ‘˜è¦ | é•¿å¯¹è¯è‡ªåŠ¨å‹ç¼© | Token å‡å°‘ 60% |
| æ‰¹é‡å¤„ç† | åˆå¹¶å¤šä¸ªå°è¯·æ±‚ | API è°ƒç”¨å‡å°‘ 40% |

**æœˆåº¦æˆæœ¬ä¼°ç®—**ï¼ˆ3000 æ¬¡æŸ¥è¯¢ï¼‰ï¼š
```
ä»»åŠ¡è§„åˆ’ï¼š500 tokens Ã— 3000 = 1.5M tokens
ReAct è¿­ä»£ï¼š1000 tokens Ã— 2 Ã— 3000 = 6M tokens
å“åº”åˆæˆï¼š1000 tokens Ã— 3000 = 3M tokens
æ€»è®¡ï¼šçº¦ 10.5M tokens

Gemini 2.0 Flash å®šä»·ï¼š
è¾“å…¥ï¼š$0.075/1M tokens
è¾“å‡ºï¼š$0.30/1M tokens
æœˆåº¦æˆæœ¬ï¼šçº¦ $2-3
```

---

## å…­ã€æ•°æ®æºè®¾è®¡

### ğŸ’¬ å£å¤´è¡¨è¿°ç‰ˆæœ¬ï¼ˆ1åˆ†é’Ÿï¼‰
> "æ•°æ®æºé‡‡ç”¨**æ’ä»¶åŒ–è®¾è®¡**ã€‚ç›®å‰ä¸»è¦æ˜¯æ–°é—»æ’ä»¶ï¼Œæä¾›ä¸‰ä¸ªæ ¸å¿ƒå·¥å…·ï¼š
> 
> 1. **get_latest_news**ï¼šè·å–æœ€æ–° AI èµ„è®¯ï¼Œæ”¯æŒæ•°é‡å’Œå…³é”®è¯è¿‡æ»¤
> 2. **search_news**ï¼šæœç´¢ç‰¹å®šä¸»é¢˜çš„æ–°é—»ï¼Œæ”¯æŒæ—¶é—´èŒƒå›´
> 3. **analyze_trends**ï¼šåˆ†ææŠ€æœ¯è¶‹åŠ¿ï¼Œè¯†åˆ«çƒ­ç‚¹è¯é¢˜
> 
> æ•°æ®æ¥æºæ˜¯ RSS èšåˆï¼Œé…ç½®äº† 10+ ä¸ªæºï¼ŒåŒ…æ‹¬ OpenAIã€Anthropic ç­‰å…¬å¸åšå®¢ï¼Œä»¥åŠ TechCrunchã€MIT Tech Review ç­‰åª’ä½“ã€‚
> 
> **å…³é”®æ˜¯å·¥å…·æŠ½è±¡**ï¼šæ¯ä¸ªå·¥å…·éƒ½æœ‰æ ‡å‡†çš„ ToolDefinitionï¼ŒåŒ…å«åç§°ã€æè¿°ã€å‚æ•°schemaã€‚è¿™æ · Agent èƒ½å¤Ÿè‡ªåŠ¨ç†è§£å·¥å…·èƒ½åŠ›ï¼ŒLLM èƒ½å¤Ÿæ™ºèƒ½é€‰æ‹©åˆé€‚çš„å·¥å…·ã€‚
> 
> æœªæ¥å¯ä»¥è½»æ¾æ‰©å±•æ–°æ’ä»¶ï¼Œæ¯”å¦‚ä»£ç åˆ†æã€æ–‡æ¡£æœç´¢ç­‰ï¼Œåªéœ€å®ç°æ ‡å‡†æ¥å£å³å¯ã€‚"

**å·¥å…·ç»Ÿè®¡**ï¼š
- ğŸ”§ 3 ä¸ªæ ¸å¿ƒå·¥å…·ï¼ˆæ–°é—»ç›¸å…³ï¼‰
- ğŸ“Š æ ‡å‡†åŒ–å·¥å…·å®šä¹‰
- ğŸ”Œ æ’ä»¶åŒ–æ¶æ„
- ğŸš€ æ˜“äºæ‰©å±•

---

### 6.1 å·¥å…·å®šä¹‰

**get_latest_news**ï¼š
```python
ToolDefinition(
    name="get_latest_news",
    description="è·å–æœ€æ–°çš„ AI èµ„è®¯",
    parameters=[
        ToolParameter(
            name="count",
            type="integer",
            description="è¿”å›çš„æ–°é—»æ•°é‡",
            required=False,
            default=5
        ),
        ToolParameter(
            name="keywords",
            type="array",
            description="å…³é”®è¯è¿‡æ»¤",
            required=False
        )
    ]
)
```

**search_news**ï¼š
```python
ToolDefinition(
    name="search_news",
    description="æœç´¢ç‰¹å®šä¸»é¢˜çš„æ–°é—»",
    parameters=[
        ToolParameter(
            name="query",
            type="string",
            description="æœç´¢æŸ¥è¯¢",
            required=True
        ),
        ToolParameter(
            name="time_range",
            type="string",
            description="æ—¶é—´èŒƒå›´ï¼ˆå¦‚ '7 days'ï¼‰",
            required=False
        )
    ]
)
```

**analyze_trends**ï¼š
```python
ToolDefinition(
    name="analyze_trends",
    description="åˆ†ææŠ€æœ¯è¶‹åŠ¿",
    parameters=[
        ToolParameter(
            name="articles",
            type="array",
            description="è¦åˆ†æçš„æ–‡ç« åˆ—è¡¨",
            required=True
        ),
        ToolParameter(
            name="focus",
            type="string",
            description="åˆ†æç„¦ç‚¹ï¼ˆå¦‚ 'technology', 'market'ï¼‰",
            required=False
        )
    ]
)
```

### 6.2 æ•°æ®æºé…ç½®

**RSS èšåˆæº**ï¼ˆ10+ æºï¼‰ï¼š

**AI å…¬å¸å®˜æ–¹åšå®¢**ï¼š
- OpenAI Blog
- Anthropic News
- Google AI Blog
- Meta AI Blog
- DeepMind Blog
- Microsoft AI Blog

**ç§‘æŠ€åª’ä½“**ï¼š
- TechCrunch AI
- MIT Technology Review
- VentureBeat AI
- The Verge AI

### 6.3 æ‰©å±•æ€§è®¾è®¡

**æ·»åŠ æ–°å·¥å…·çš„æ­¥éª¤**ï¼š
1. åœ¨æ’ä»¶ä¸­å®šä¹‰ ToolDefinition
2. å®ç°å·¥å…·æ‰§è¡Œé€»è¾‘
3. åœ¨ ToolRegistry ä¸­æ³¨å†Œ
4. Agent è‡ªåŠ¨è¯†åˆ«å’Œä½¿ç”¨

**æœªæ¥è§„åˆ’çš„å·¥å…·**ï¼š
- **ä»£ç åˆ†æå·¥å…·**ï¼šåˆ†æ GitHub ä»“åº“
- **æ–‡æ¡£æœç´¢å·¥å…·**ï¼šæœç´¢æŠ€æœ¯æ–‡æ¡£
- **æ•°æ®å¯è§†åŒ–å·¥å…·**ï¼šç”Ÿæˆå›¾è¡¨
- **ç¿»è¯‘å·¥å…·**ï¼šå¤šè¯­è¨€æ”¯æŒ

---

## ä¸ƒã€éƒ¨ç½²æ¶æ„

### ğŸ’¬ å£å¤´è¡¨è¿°ç‰ˆæœ¬ï¼ˆ1åˆ†é’Ÿï¼‰
> "éƒ¨ç½²ä¸Šæˆ‘ç”¨äº†**Docker æ··åˆæ¨¡å¼**ã€‚å¼€å‘ç¯å¢ƒä¸­ï¼ŒPython åç«¯å’Œ PostgreSQL æ•°æ®åº“éƒ½è·‘åœ¨ Docker å®¹å™¨é‡Œï¼Œè§£å†³äº†ä¾èµ–é—®é¢˜ï¼Œæ”¯æŒçƒ­é‡è½½ã€‚Next.js å‰ç«¯åœ¨æœ¬åœ°è¿è¡Œï¼Œä¿æŒ Cursor è°ƒè¯•ä¾¿åˆ©æ€§ã€‚
> 
> ä¸€é”®å¯åŠ¨è„šæœ¬ `./scripts/startup/full-stack.sh start` ä¼šè‡ªåŠ¨å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ŒåŒ…æ‹¬æ•°æ®åº“åˆå§‹åŒ–ã€åç«¯å¯åŠ¨ã€å‰ç«¯å¯åŠ¨ã€‚åœæ­¢ä¹Ÿæ˜¯ä¸€é”® `stop`ï¼Œéå¸¸æ–¹ä¾¿ã€‚
> 
> ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²åœ¨ Vercelï¼šå‰ç«¯ç”¨ Vercel çš„ CDNï¼Œåç«¯ç”¨ Serverless Functionsï¼Œæ•°æ®åº“ç”¨ Vercel Postgresã€‚è¿™æ ·çš„å¥½å¤„æ˜¯é›¶è¿ç»´ï¼Œè‡ªåŠ¨æ‰©å±•ï¼Œè€Œä¸” Vercel å¯¹ Next.js ä¼˜åŒ–å¾ˆå¥½ã€‚
> 
> **æˆæœ¬æ§åˆ¶**ï¼šVercel å…è´¹é¢åº¦è¶³å¤Ÿä¸ªäººé¡¹ç›®ï¼Œæ•°æ®åº“å…è´¹ 256MBï¼ŒLLM æœˆæˆæœ¬ 2-3 ç¾å…ƒï¼Œæ€»æˆæœ¬éå¸¸ä½ã€‚"

**éƒ¨ç½²ä¼˜åŠ¿**ï¼š
- ğŸ³ Docker ç¯å¢ƒéš”ç¦»
- âš¡ ä¸€é”®å¯åŠ¨/åœæ­¢
- ğŸ’° ä½æˆæœ¬ï¼ˆ<$5/æœˆï¼‰
- ğŸ”„ è‡ªåŠ¨çƒ­é‡è½½

---

### 7.1 Docker æ··åˆæ¨¡å¼

**æ¶æ„è®¾è®¡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¼€å‘ç¯å¢ƒ                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Next.js      â”‚  â”‚ Python       â”‚  â”‚ PostgreSQL   â”‚ â”‚
â”‚  â”‚ Frontend     â”‚  â”‚ Backend      â”‚  â”‚ Database     â”‚ â”‚
â”‚  â”‚ (æœ¬åœ°)       â”‚  â”‚ (Docker)     â”‚  â”‚ (Docker)     â”‚ â”‚
â”‚  â”‚ :3000        â”‚  â”‚ :8000        â”‚  â”‚ :5432        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                  â”‚                  â”‚         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                    localhost ç½‘ç»œ                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸€é”®å¯åŠ¨è„šæœ¬**ï¼š
```bash
# å¯åŠ¨å…¨æ ˆç¯å¢ƒ
./scripts/startup/full-stack.sh start

# æ‰§è¡Œæµç¨‹ï¼š
# 1. æ£€æŸ¥ Docker æ˜¯å¦è¿è¡Œ
# 2. å¯åŠ¨ PostgreSQL å®¹å™¨
# 3. ç­‰å¾…æ•°æ®åº“å°±ç»ª
# 4. è¿è¡Œæ•°æ®åº“è¿ç§»
# 5. å¯åŠ¨ Python åç«¯å®¹å™¨
# 6. å¯åŠ¨ Next.js å‰ç«¯ï¼ˆæœ¬åœ°ï¼‰
# 7. æ˜¾ç¤ºæœåŠ¡çŠ¶æ€

# åœæ­¢å…¨æ ˆç¯å¢ƒ
./scripts/startup/full-stack.sh stop

# æŸ¥çœ‹çŠ¶æ€
./scripts/startup/full-stack.sh status
```

**ä¼˜åŠ¿**ï¼š
- åç«¯ç¯å¢ƒéš”ç¦»ï¼Œæ—  Python ä¾èµ–é—®é¢˜
- å‰ç«¯æœ¬åœ°è¿è¡Œï¼Œä¿æŒ Cursor è°ƒè¯•åŠŸèƒ½
- æ•°æ®åº“å®¹å™¨åŒ–ï¼Œæ•°æ®æŒä¹…åŒ–
- æ”¯æŒä»£ç çƒ­é‡è½½
- ä¸€é”®å¯åŠ¨/åœæ­¢ï¼Œå¼€å‘ä½“éªŒå¥½

### 7.2 ç”Ÿäº§ç¯å¢ƒ

**Vercel éƒ¨ç½²æ¶æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”Ÿäº§ç¯å¢ƒ (Vercel)                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Next.js      â”‚  â”‚ Python       â”‚  â”‚ Vercel       â”‚ â”‚
â”‚  â”‚ Frontend     â”‚  â”‚ Serverless   â”‚  â”‚ Postgres     â”‚ â”‚
â”‚  â”‚ (CDN)        â”‚  â”‚ Functions    â”‚  â”‚ (256MB)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                  â”‚                  â”‚         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                    Vercel ç½‘ç»œ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éƒ¨ç½²é…ç½®**ï¼š
- **å‰ç«¯**ï¼šVercel è‡ªåŠ¨éƒ¨ç½²ï¼ˆGit push è§¦å‘ï¼‰
- **åç«¯**ï¼šServerless Functionsï¼ˆPython 3.11ï¼‰
- **æ•°æ®åº“**ï¼šVercel Postgresï¼ˆå…è´¹ 256MBï¼‰
- **ç›‘æ§**ï¼šVercel Analytics + è‡ªå®šä¹‰æ—¥å¿—

**æˆæœ¬ä¼°ç®—**ï¼š
- Vercel å…è´¹é¢åº¦ï¼š100GB å¸¦å®½/æœˆ
- æ•°æ®åº“ï¼šå…è´¹ 256MB
- LLMï¼š$2-3/æœˆ
- æ€»æˆæœ¬ï¼š< $5/æœˆ

---

## å…«ã€å¼€å‘å†ç¨‹ä¸æŒ‘æˆ˜

### ğŸ’¬ å£å¤´è¡¨è¿°ç‰ˆæœ¬ï¼ˆ2åˆ†é’Ÿï¼‰
> "è¿™ä¸ªé¡¹ç›®ç»å†äº†ä¸‰ä¸ªé‡è¦ç‰ˆæœ¬çš„æ¼”è¿›ã€‚
> 
> **V1.0 - å‘½ä»¤è·¯ç”±**ï¼šæœ€åˆåªæ”¯æŒå‘½ä»¤å¼è¾“å…¥ï¼Œå¦‚ `/latest 5`ã€‚æ’ä»¶ç®¡ç†åœ¨å‰ç«¯ï¼Œç”¨ mock æ•°æ®ã€‚é—®é¢˜æ˜¯å‰åç«¯é€»è¾‘é‡å¤ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚
> 
> **V2.0 - å·¥å…·é€‰æ‹©**ï¼šå¼•å…¥ LLM è‡ªç„¶è¯­è¨€ç†è§£ï¼ŒæŠŠä¸šåŠ¡é€»è¾‘ç§»åˆ°åç«¯ï¼Œé›†æˆçœŸå®æ•°æ®æºã€‚è¿™æ¬¡é‡æ„è®©å‰ç«¯ä»£ç å‡å°‘ 27%ï¼ŒèŒè´£æ›´æ¸…æ™°ã€‚
> 
> **V3.0 - ReAct Agent**ï¼ˆå½“å‰ï¼‰ï¼šè¿™æ˜¯æœ€å¤§çš„å‡çº§ã€‚ä»å•æ¬¡å·¥å…·è°ƒç”¨å‡çº§åˆ°å¤šæ­¥æ¨ç†å¾ªç¯ã€‚æ–°å¢äº† TaskPlannerã€ConversationMemoryã€ToolOrchestratorã€ReflectionEngine å››ä¸ªæ ¸å¿ƒç»„ä»¶ã€‚æ”¯æŒå¤æ‚ä»»åŠ¡åˆ†è§£ã€ä¼šè¯è®°å¿†ã€å·¥å…·ç¼–æ’å’Œè´¨é‡è¯„ä¼°ã€‚
> 
> **æŠ€æœ¯æŒ‘æˆ˜**æˆ‘é‡åˆ°äº†å››ä¸ªï¼š
> 
> 1. **å¦‚ä½•å®ç° ReAct å¾ªç¯ï¼Ÿ** æ ¸å¿ƒæ˜¯çŠ¶æ€ç®¡ç†å’Œè¿­ä»£æ§åˆ¶ã€‚æ¯æ¬¡è¿­ä»£éƒ½è¦ä¿å­˜å®Œæ•´çš„ Thought-Action-Observationï¼Œæœ€å¤š 5 æ¬¡è¿­ä»£ï¼Œéœ€è¦åˆ¤æ–­ç»ˆæ­¢æ¡ä»¶ã€‚
> 
> 2. **å¦‚ä½•ç®¡ç†ä¼šè¯è®°å¿†ï¼Ÿ** ä½¿ç”¨ PostgreSQL æŒä¹…åŒ–å­˜å‚¨ï¼Œæœ€è¿‘ 10 æ¡å®Œæ•´ä¿å­˜ï¼Œæ›´æ—©çš„ç”Ÿæˆæ‘˜è¦ã€‚24 å°æ—¶æ— æ´»åŠ¨è‡ªåŠ¨æ¸…ç†ã€‚
> 
> 3. **å¦‚ä½•é™ä½ LLM æˆæœ¬ï¼Ÿ** é€‰æ‹© Gemini 2.0 Flashï¼Œå·¥å…·ç»“æœç¼“å­˜ï¼Œå¯¹è¯æ‘˜è¦å‹ç¼©ï¼Œæç¤ºè¯ä¼˜åŒ–ã€‚æœˆæˆæœ¬ä» 40 ç¾å…ƒé™åˆ° 2-3 ç¾å…ƒã€‚
> 
> 4. **å¦‚ä½•ä¿è¯å‘åå…¼å®¹ï¼Ÿ** ä¿ç•™æ—§ç‰ˆ API ç«¯ç‚¹ï¼Œå†…éƒ¨è½¬æ¢ä¸º ReAct æ ¼å¼ã€‚å‰ç«¯å¯ä»¥é€‰æ‹©ä½¿ç”¨æ–°æ—§ä¸¤ç§æ¨¡å¼ã€‚"

**é‡åŒ–æˆæœ**ï¼š
- ğŸ§  æ¨ç†èƒ½åŠ›ï¼šå•æ¬¡ â†’ å¤šæ­¥ï¼ˆæœ€å¤š 5 æ¬¡ï¼‰
- ğŸ’¾ ä¼šè¯è®°å¿†ï¼šæ— çŠ¶æ€ â†’ æŒä¹…åŒ–
- ğŸ“‹ ä»»åŠ¡è§„åˆ’ï¼šæ—  â†’ è‡ªåŠ¨åˆ†è§£
- ğŸ’° æˆæœ¬ï¼š$40/æœˆ â†’ $2-3/æœˆ
- âš¡ å¤æ‚æŸ¥è¯¢ï¼šä¸æ”¯æŒ â†’ < 10s

---

### 8.1 æ¶æ„æ¼”è¿›

**V1.0 - å‘½ä»¤è·¯ç”±**ï¼ˆ2024-01ï¼‰ï¼š
- ä»…æ”¯æŒå‘½ä»¤å¼è¾“å…¥ï¼ˆ`/latest`, `/search`ï¼‰
- å‰ç«¯å¤„ç†æ’ä»¶ç®¡ç†
- ä½¿ç”¨ mock æ•°æ®
- å•æ¬¡å·¥å…·è°ƒç”¨

**V2.0 - å·¥å…·é€‰æ‹©**ï¼ˆ2024-06ï¼‰ï¼š
- è‡ªç„¶è¯­è¨€ç†è§£ï¼ˆLLMï¼‰
- åç«¯é›†ä¸­ç®¡ç†ä¸šåŠ¡é€»è¾‘
- çœŸå®æ•°æ®æºï¼ˆRSS + APIï¼‰
- å•æ¬¡å·¥å…·è°ƒç”¨
- åŸºç¡€æ’ä»¶ç³»ç»Ÿ

**V3.0 - ReAct Agent**ï¼ˆ2024-12ï¼Œå½“å‰ï¼‰ï¼š
- ReAct æ¨ç†å¾ªç¯ï¼ˆæœ€å¤š 5 æ¬¡è¿­ä»£ï¼‰
- ä»»åŠ¡è§„åˆ’å’Œåˆ†è§£ï¼ˆTaskPlannerï¼‰
- ä¼šè¯è®°å¿†ç®¡ç†ï¼ˆConversationMemoryï¼‰
- å·¥å…·ç¼–æ’ç³»ç»Ÿï¼ˆToolOrchestratorï¼‰
- è´¨é‡è¯„ä¼°åæ€ï¼ˆReflectionEngineï¼‰
- å¤šæ­¥æ¨ç†èƒ½åŠ›

**ä»£ç æ”¹è¿›**ï¼š
- æ–°å¢ 5 ä¸ªæ ¸å¿ƒç»„ä»¶
- æ•°æ®åº“è¡¨ï¼š2 ä¸ªï¼ˆagent_conversations, agent_sessionsï¼‰
- API ç«¯ç‚¹ï¼šå‘åå…¼å®¹
- æµ‹è¯•è¦†ç›–ç‡ï¼š> 80%

### 8.2 æŠ€æœ¯æŒ‘æˆ˜

#### æŒ‘æˆ˜ 1ï¼šå¦‚ä½•å®ç° ReAct å¾ªç¯ï¼Ÿ
**é—®é¢˜**ï¼š
- å¦‚ä½•ç®¡ç†å¤šæ­¥è¿­ä»£çŠ¶æ€ï¼Ÿ
- å¦‚ä½•åˆ¤æ–­ä»»åŠ¡å®Œæˆï¼Ÿ
- å¦‚ä½•å¤„ç†å¾ªç¯ä¸­çš„é”™è¯¯ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
async def _react_loop(query, plan, context):
    steps = []
    for iteration in range(1, MAX_ITERATIONS + 1):
        try:
            # æ‰§è¡Œå•æ¬¡è¿­ä»£
            step = await self._react_iteration(
                query, plan, steps, context, iteration
            )
            steps.append(step)
            
            # åˆ¤æ–­ç»ˆæ­¢æ¡ä»¶
            if self._should_terminate(steps, plan):
                break
        except Exception as e:
            # é”™è¯¯å¤„ç†å’Œæ¢å¤
            logger.error(f"Iteration {iteration} failed: {e}")
            if iteration >= MAX_ITERATIONS:
                raise
    
    return steps
```

**å…³é”®è®¾è®¡**ï¼š
- çŠ¶æ€ä¿å­˜åœ¨ `steps` åˆ—è¡¨ä¸­
- æ¯æ¬¡è¿­ä»£ç‹¬ç«‹ï¼Œå¤±è´¥ä¸å½±å“å‰é¢çš„æ­¥éª¤
- å¤šç§ç»ˆæ­¢æ¡ä»¶ï¼šä»»åŠ¡å®Œæˆã€è¾¾åˆ°æœ€å¤§è¿­ä»£ã€å·¥å…·å¤±è´¥

#### æŒ‘æˆ˜ 2ï¼šå¦‚ä½•ç®¡ç†ä¼šè¯è®°å¿†ï¼Ÿ
**é—®é¢˜**ï¼š
- å¦‚ä½•å­˜å‚¨å¤§é‡å¯¹è¯å†å²ï¼Ÿ
- å¦‚ä½•å‹ç¼©é•¿å¯¹è¯ï¼Ÿ
- å¦‚ä½•æ¸…ç†è¿‡æœŸä¼šè¯ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
class ConversationMemory:
    async def get_history(session_id, limit=10):
        # 1. æŸ¥è¯¢æœ€è¿‘ N æ¡
        recent = await db.query(
            "SELECT * FROM agent_conversations "
            "WHERE session_id = $1 "
            "ORDER BY created_at DESC LIMIT $2",
            session_id, limit
        )
        
        # 2. å¦‚æœå¯¹è¯è¿‡é•¿ï¼Œç”Ÿæˆæ‘˜è¦
        if len(recent) >= limit:
            summary = await self._generate_summary(session_id)
            return [summary] + recent[:limit-1]
        
        return recent
    
    async def cleanup_expired_sessions(hours=24):
        # å®šæ—¶ä»»åŠ¡ï¼šæ¸…ç† 24 å°æ—¶æ— æ´»åŠ¨çš„ä¼šè¯
        await db.execute(
            "DELETE FROM agent_sessions "
            "WHERE last_active < NOW() - INTERVAL '$1 hours'",
            hours
        )
```

**å­˜å‚¨ç­–ç•¥**ï¼š
- æœ€è¿‘ 10 æ¡ï¼šå®Œæ•´å­˜å‚¨
- 10+ æ¡ï¼šç”Ÿæˆæ‘˜è¦ + æœ€è¿‘ 10 æ¡
- 24 å°æ—¶æ— æ´»åŠ¨ï¼šè‡ªåŠ¨æ¸…ç†

#### æŒ‘æˆ˜ 3ï¼šå¦‚ä½•é™ä½ LLM æˆæœ¬ï¼Ÿ
**é—®é¢˜**ï¼š
- GPT-4 æœˆæˆæœ¬ $40+ï¼Œå¤ªè´µ
- å¤šæ­¥æ¨ç†ä¼šå¢åŠ  token ä½¿ç”¨é‡
- å¦‚ä½•åœ¨æˆæœ¬å’Œè´¨é‡é—´å¹³è¡¡ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **æ¨¡å‹é€‰æ‹©**ï¼šGemini 2.0 Flashï¼ˆæˆæœ¬é™ä½ 95%ï¼‰
2. **å·¥å…·ç»“æœç¼“å­˜**ï¼š5 åˆ†é’Ÿ TTLï¼Œé¿å…é‡å¤æ‰§è¡Œ
3. **å¯¹è¯æ‘˜è¦**ï¼šé•¿å¯¹è¯å‹ç¼©ï¼Œtoken å‡å°‘ 60%
4. **æç¤ºè¯ä¼˜åŒ–**ï¼šç²¾ç®€æç¤ºè¯ï¼Œå‡å°‘ç¤ºä¾‹
5. **æ‰¹é‡å¤„ç†**ï¼šåˆå¹¶å¤šä¸ªå°è¯·æ±‚

**æˆæœ¬å¯¹æ¯”**ï¼š
```
GPT-4: $40/æœˆ (3000 æ¬¡æŸ¥è¯¢)
Gemini 2.0 Flash: $2-3/æœˆ (3000 æ¬¡æŸ¥è¯¢)
èŠ‚çœ: 95%
```

#### æŒ‘æˆ˜ 4ï¼šå¦‚ä½•ä¿è¯å‘åå…¼å®¹ï¼Ÿ
**é—®é¢˜**ï¼š
- æ—§ç‰ˆ API å·²ç»åœ¨ä½¿ç”¨
- å‰ç«¯éœ€è¦æ—¶é—´é€‚é…
- å¦‚ä½•å¹³æ»‘è¿ç§»ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# ä¿ç•™æ—§ç‰ˆç«¯ç‚¹
@app.post("/api/agent/chat")
async def chat_legacy(request: LegacyRequest):
    # è½¬æ¢ä¸º ReAct æ ¼å¼
    react_request = convert_to_react(request)
    
    # ä½¿ç”¨ ReAct Agent æ‰§è¡Œ
    response = await react_agent.execute(react_request)
    
    # è½¬æ¢å›æ—§ç‰ˆæ ¼å¼
    return convert_to_legacy(response)

# æ–°ç‰ˆç«¯ç‚¹
@app.post("/api/agent/execute")
async def execute_react(request: ReactRequest):
    return await react_agent.execute(request)
```

**è¿ç§»ç­–ç•¥**ï¼š
- ä¿ç•™æ—§ç‰ˆ API ç«¯ç‚¹
- å†…éƒ¨ç»Ÿä¸€ä½¿ç”¨ ReAct Agent
- å‰ç«¯å¯é€‰æ‹©æ–°æ—§ä¸¤ç§æ¨¡å¼
- é€æ­¥åºŸå¼ƒæ—§ç‰ˆ API

---

## ä¹ã€æœªæ¥è§„åˆ’

### ğŸ’¬ å£å¤´è¡¨è¿°ç‰ˆæœ¬ï¼ˆ1åˆ†é’Ÿï¼‰
> "æœªæ¥è§„åˆ’åˆ†ä¸‰ä¸ªé˜¶æ®µï¼š
> 
> **çŸ­æœŸ**ï¼ˆ1-2ä¸ªæœˆï¼‰ï¼šä¼˜åŒ–ç°æœ‰åŠŸèƒ½ã€‚ReAct Agent æ ¸å¿ƒå·²å®Œæˆï¼Œæ¥ä¸‹æ¥è¦ä¼˜åŒ–æç¤ºè¯æå‡æ¨ç†è´¨é‡ï¼Œæ·»åŠ æ›´å¤šå·¥å…·ï¼ˆå¦‚ä»£ç åˆ†æã€æ–‡æ¡£æœç´¢ï¼‰ï¼Œå®ç°æµå¼å“åº”æå‡ç”¨æˆ·ä½“éªŒï¼Œå®Œå–„ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿã€‚
> 
> **ä¸­æœŸ**ï¼ˆ3-6ä¸ªæœˆï¼‰ï¼šå¢å¼ºæ™ºèƒ½åŒ–ã€‚æ”¯æŒå¤š Agent åä½œï¼ˆå¦‚ä¸€ä¸ª Agent è´Ÿè´£æœç´¢ï¼Œå¦ä¸€ä¸ªè´Ÿè´£åˆ†æï¼‰ï¼Œæ„å»º AI é¢†åŸŸçŸ¥è¯†å›¾è°±ï¼Œå®ç°ä¸ªæ€§åŒ–æ¨èï¼Œæ·»åŠ è‡ªä¸»å­¦ä¹ èƒ½åŠ›ï¼ˆä»ç”¨æˆ·åé¦ˆä¸­å­¦ä¹ ï¼‰ã€‚
> 
> **é•¿æœŸ**ï¼ˆ6-12ä¸ªæœˆï¼‰ï¼šæ¢ç´¢é«˜çº§ç‰¹æ€§ã€‚å¤šæ¨¡æ€å¤„ç†ï¼ˆå›¾ç‰‡ã€è§†é¢‘ã€ä»£ç ï¼‰ï¼Œç§»åŠ¨ç«¯é€‚é…ï¼Œå¼€æ”¾ API ä¾›ç¬¬ä¸‰æ–¹ä½¿ç”¨ï¼Œç”šè‡³æ„å»º Agent å¸‚åœºè®©ç”¨æˆ·è‡ªå®šä¹‰ Agentã€‚
> 
> è¿™ä¸ªè§„åˆ’æ˜¯æ¸è¿›å¼çš„ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®çš„å¯äº¤ä»˜æˆæœã€‚"

**è¿‘æœŸé‡ç‚¹**ï¼š
- âœ… ReAct Agent æ ¸å¿ƒï¼ˆå·²å®Œæˆï¼‰
- âœ… ä¼šè¯è®°å¿†ï¼ˆå·²å®Œæˆï¼‰
- ğŸ¯ æµå¼å“åº”ï¼ˆè¿›è¡Œä¸­ï¼‰
- ğŸ“Š ç›‘æ§ç³»ç»Ÿï¼ˆè®¡åˆ’ä¸­ï¼‰

---

### 9.1 çŸ­æœŸç›®æ ‡ï¼ˆ1-2ä¸ªæœˆï¼‰

**åŠŸèƒ½ä¼˜åŒ–**ï¼š
- â³ æµå¼å“åº”ï¼ˆSSEï¼‰ï¼šå®æ—¶æ˜¾ç¤ºæ¨ç†è¿‡ç¨‹
- â³ æç¤ºè¯ä¼˜åŒ–ï¼šæå‡æ¨ç†è´¨é‡å’Œå‡†ç¡®æ€§
- â³ é”™è¯¯æ¢å¤ï¼šæ›´æ™ºèƒ½çš„é‡è¯•å’Œé™çº§ç­–ç•¥
- â³ ç”¨æˆ·åé¦ˆï¼šæ”¶é›†åé¦ˆç”¨äºæ”¹è¿›

**å·¥å…·æ‰©å±•**ï¼š
- â³ ä»£ç åˆ†æå·¥å…·ï¼šåˆ†æ GitHub ä»“åº“
- â³ æ–‡æ¡£æœç´¢å·¥å…·ï¼šæœç´¢æŠ€æœ¯æ–‡æ¡£
- â³ æ•°æ®å¯è§†åŒ–å·¥å…·ï¼šç”Ÿæˆå›¾è¡¨
- â³ ç¿»è¯‘å·¥å…·ï¼šå¤šè¯­è¨€æ”¯æŒ

**ç›‘æ§å’Œè¿ç»´**ï¼š
- â³ æ€§èƒ½ç›‘æ§ï¼šå“åº”æ—¶é—´ã€æˆåŠŸç‡ã€é”™è¯¯ç‡
- â³ æˆæœ¬ç›‘æ§ï¼šLLM token ä½¿ç”¨é‡ã€API è°ƒç”¨æ¬¡æ•°
- â³ æ—¥å¿—åˆ†æï¼šè¯†åˆ«å¸¸è§é—®é¢˜å’Œä¼˜åŒ–ç‚¹
- â³ å‘Šè­¦ç³»ç»Ÿï¼šå¼‚å¸¸æƒ…å†µè‡ªåŠ¨é€šçŸ¥

### 9.2 ä¸­æœŸç›®æ ‡ï¼ˆ3-6ä¸ªæœˆï¼‰

**å¤š Agent åä½œ**ï¼š
- æœç´¢ Agentï¼šä¸“æ³¨äºä¿¡æ¯æ£€ç´¢
- åˆ†æ Agentï¼šä¸“æ³¨äºæ•°æ®åˆ†æ
- å†™ä½œ Agentï¼šä¸“æ³¨äºå†…å®¹ç”Ÿæˆ
- åè°ƒ Agentï¼šåè°ƒå¤šä¸ª Agent åä½œ

**çŸ¥è¯†å›¾è°±**ï¼š
- æ„å»º AI é¢†åŸŸçŸ¥è¯†å›¾è°±
- å®ä½“è¯†åˆ«å’Œå…³ç³»æŠ½å–
- çŸ¥è¯†æ¨ç†å’Œé—®ç­”
- çŸ¥è¯†æ›´æ–°å’Œç»´æŠ¤

**ä¸ªæ€§åŒ–æ¨è**ï¼š
- ç”¨æˆ·ç”»åƒæ„å»º
- å…´è¶£åå¥½å­¦ä¹ 
- ä¸ªæ€§åŒ–å†…å®¹æ¨è
- A/B æµ‹è¯•å’Œä¼˜åŒ–

**è‡ªä¸»å­¦ä¹ **ï¼š
- ä»ç”¨æˆ·åé¦ˆä¸­å­¦ä¹ 
- ç­–ç•¥ä¼˜åŒ–å’Œè°ƒæ•´
- å·¥å…·ä½¿ç”¨æ¨¡å¼å­¦ä¹ 
- æŒç»­æ”¹è¿›æ¨ç†è´¨é‡

### 9.3 é•¿æœŸç›®æ ‡ï¼ˆ6-12ä¸ªæœˆï¼‰

**å¤šæ¨¡æ€å¤„ç†**ï¼š
- å›¾ç‰‡ç†è§£å’Œç”Ÿæˆ
- è§†é¢‘åˆ†æå’Œæ‘˜è¦
- ä»£ç ç†è§£å’Œç”Ÿæˆ
- éŸ³é¢‘å¤„ç†

**ç§»åŠ¨ç«¯é€‚é…**ï¼š
- å“åº”å¼è®¾è®¡
- ç§»åŠ¨ç«¯ä¼˜åŒ–
- ç¦»çº¿æ”¯æŒ
- æ¨é€é€šçŸ¥

**å¼€æ”¾å¹³å°**ï¼š
- å¼€æ”¾ API æ¥å£
- SDK å’Œæ–‡æ¡£
- å¼€å‘è€…ç¤¾åŒº
- Agent å¸‚åœº

**é«˜çº§ç‰¹æ€§**ï¼š
- è‡ªå®šä¹‰ Agentï¼šç”¨æˆ·å¯ä»¥åˆ›å»ºè‡ªå·±çš„ Agent
- Agent ç»„åˆï¼šç»„åˆå¤šä¸ª Agent å®Œæˆå¤æ‚ä»»åŠ¡
- Agent å…±äº«ï¼šåˆ†äº« Agent ç»™å…¶ä»–ç”¨æˆ·
- Agent å¸‚åœºï¼šä¹°å– Agent å’Œå·¥å…·

---

## åã€é¢è¯•è¦ç‚¹æ€»ç»“

### ğŸ’¬ å£å¤´è¡¨è¿°ç‰ˆæœ¬ï¼ˆ2åˆ†é’Ÿ - æ€»ç»“é™ˆè¯ï¼‰
> "æ€»ç»“ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®çš„æ ¸å¿ƒä»·å€¼ï¼š
> 
> **æŠ€æœ¯ä¸Š**ï¼Œæˆ‘å±•ç¤ºäº†å…¨æ ˆå¼€å‘èƒ½åŠ›ï¼šå‰ç«¯ Next.js + Reactï¼Œåç«¯ FastAPI + Pythonï¼ŒAI é›†æˆ Geminiï¼Œéƒ¨ç½² Docker + Vercelã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘å®è·µäº†è‰¯å¥½çš„æ¶æ„è®¾è®¡ï¼šReAct æ¨ç†å¾ªç¯ã€åˆ†å±‚æ¶æ„ã€ä¾èµ–æ³¨å…¥åŸåˆ™ã€‚
> 
> **å·¥ç¨‹ä¸Š**ï¼Œæˆ‘æ³¨é‡æˆæœ¬å’Œæ€§èƒ½ï¼šé€šè¿‡ LLM é€‰å‹å’Œå¤šå±‚ç¼“å­˜ï¼ŒæŠŠæœˆæˆæœ¬æ§åˆ¶åœ¨ 2-3 ç¾å…ƒï¼Œå“åº”æ—¶é—´ä¼˜åŒ–åˆ° 500 æ¯«ç§’ã€‚è¿™ä½“ç°äº†æˆ‘çš„å·¥ç¨‹æ€ç»´ã€‚
> 
> **äº§å“ä¸Š**ï¼Œæˆ‘å…³æ³¨ç”¨æˆ·ä½“éªŒï¼šè‡ªç„¶è¯­è¨€äº¤äº’ï¼Œå®æ—¶æµå¼è¾“å‡ºï¼Œé€æ˜çš„æ¨ç†è¿‡ç¨‹ã€‚è¿™æ˜¯ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„äº§å“ï¼Œä¸æ˜¯ç©å…·é¡¹ç›®ã€‚
> 
> **5 ä¸ªæ ¸å¿ƒäº®ç‚¹**ï¼š
> 1. ReAct æ¨ç†å¾ªç¯ - æ”¯æŒå¤šæ­¥æ¨ç†ï¼Œå¤„ç†å¤æ‚ä»»åŠ¡
> 2. æ™ºèƒ½ä»»åŠ¡è§„åˆ’ - è‡ªåŠ¨åˆ†è§£å¤æ‚æŸ¥è¯¢ï¼Œä¼°ç®—æ‰§è¡Œæ­¥éª¤
> 3. ä¼šè¯è®°å¿†ç®¡ç† - æŒä¹…åŒ–å¯¹è¯å†å²ï¼Œæ”¯æŒé•¿å¯¹è¯æ‘˜è¦
> 4. å·¥å…·ç¼–æ’ç³»ç»Ÿ - å¤„ç†å·¥å…·ä¾èµ–ï¼Œç¼“å­˜ç»“æœï¼Œä¼˜åŒ–æ€§èƒ½
> 5. è´¨é‡è‡ªæˆ‘è¯„ä¼° - åæ€è¾“å‡ºè´¨é‡ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦é‡è¯•
> 
> è¿™ä¸ªé¡¹ç›®è®©æˆ‘æ·±å…¥ç†è§£äº† AI Agent å¼€å‘çš„å®Œæ•´é“¾è·¯ï¼Œä» ReAct æ¡†æ¶ã€ä»»åŠ¡è§„åˆ’ï¼Œåˆ°å·¥å…·ç¼–æ’ã€ä¼šè¯ç®¡ç†ã€‚"

**é¢è¯•é‡‘å¥**ï¼š
- ğŸ’¡ "ReAct æ¨ç†å¾ªç¯æ˜¯æ ¸å¿ƒåˆ›æ–°ï¼Œè®© Agent èƒ½å¤Ÿåƒäººä¸€æ ·æ€è€ƒå’Œè¡ŒåŠ¨"
- ğŸ’° "é€šè¿‡ LLM é€‰å‹å’Œç¼“å­˜ä¼˜åŒ–ï¼Œæœˆæˆæœ¬ä» 40 ç¾å…ƒé™åˆ° 2-3 ç¾å…ƒ"
- ğŸš€ "è¿™ä¸æ˜¯ä¸€ä¸ª Demoï¼Œè€Œæ˜¯ä¸€ä¸ªçœŸæ­£åœ¨ç”Ÿäº§ç¯å¢ƒè¿è¡Œçš„ AI Agent"
- ğŸ¯ "æˆ‘ä¸ä»…ä¼šå†™ä»£ç ï¼Œæ›´å…³æ³¨æ¶æ„è®¾è®¡ã€æˆæœ¬æ§åˆ¶å’Œç”¨æˆ·ä½“éªŒ"

---

### 10.1 æŠ€æœ¯æ ˆ
- **å‰ç«¯**ï¼šNext.js 14 + React 18 + TypeScript
- **åç«¯**ï¼šPython + FastAPI + Pydantic
- **LLM**ï¼šGoogle Gemini 1.5 Flash/Pro
- **ç¼“å­˜**ï¼šRedis
- **éƒ¨ç½²**ï¼šDocker + Vercel

### 10.2 æ ¸å¿ƒèƒ½åŠ›å±•ç¤º
1. **ç³»ç»Ÿè®¾è®¡èƒ½åŠ›**ï¼šæ’ä»¶åŒ–æ¶æ„ã€ç»Ÿä¸€æ„å›¾æ¨¡å‹
2. **AI é›†æˆèƒ½åŠ›**ï¼šLLM é€‰å‹ã€Prompt å·¥ç¨‹ã€æˆæœ¬ä¼˜åŒ–
3. **å·¥ç¨‹èƒ½åŠ›**ï¼šç¼“å­˜ç­–ç•¥ã€é”™è¯¯å¤„ç†ã€ä¾èµ–å€’ç½®
4. **å…¨æ ˆèƒ½åŠ›**ï¼šå‰åç«¯åˆ†ç¦»ã€API è®¾è®¡ã€éƒ¨ç½²è¿ç»´

### 10.3 å¯è®¨è®ºçš„è¯é¢˜
- ä¸ºä»€ä¹ˆé€‰æ‹© Gemini 2.0 Flash è€Œä¸æ˜¯ GPTï¼Ÿï¼ˆæˆæœ¬ã€æ€§èƒ½ã€å…è´¹é¢åº¦ï¼‰
- å¦‚ä½•å®ç° ReAct æ¨ç†å¾ªç¯ï¼Ÿï¼ˆçŠ¶æ€ç®¡ç†ã€è¿­ä»£æ§åˆ¶ã€ç»ˆæ­¢æ¡ä»¶ï¼‰
- å¦‚ä½•ä¼˜åŒ– LLM è°ƒç”¨æˆæœ¬ï¼Ÿï¼ˆç¼“å­˜ã€é™çº§ã€æ‰¹å¤„ç†ï¼‰
- ä»»åŠ¡è§„åˆ’å™¨å¦‚ä½•å·¥ä½œï¼Ÿï¼ˆå¤æ‚åº¦åˆ†ç±»ã€ä»»åŠ¡åˆ†è§£ã€å·¥å…·é€‰æ‹©ï¼‰
- å¦‚ä½•å¤„ç† LLM çš„ä¸ç¡®å®šæ€§ï¼Ÿï¼ˆè´¨é‡è¯„ä¼°ã€é™çº§æ–¹æ¡ˆã€é‡è¯•ç­–ç•¥ï¼‰
- ä¼šè¯è®°å¿†å¦‚ä½•ç®¡ç†ï¼Ÿï¼ˆæŒä¹…åŒ–å­˜å‚¨ã€å¯¹è¯æ‘˜è¦ã€è¿‡æœŸæ¸…ç†ï¼‰
- å·¥å…·ç¼–æ’çš„ä¼˜åŠ¿ï¼Ÿï¼ˆä¾èµ–å¤„ç†ã€å‚æ•°å¼•ç”¨ã€ç»“æœç¼“å­˜ï¼‰

### 10.4 é¡¹ç›®äº®ç‚¹
- âœ¨ **åˆ›æ–°æ€§**ï¼šReAct æ¨ç†å¾ªç¯ï¼Œå¤šæ­¥æ¨ç†èƒ½åŠ›
- âœ¨ **å®ç”¨æ€§**ï¼šçœŸå®æ•°æ®æºï¼Œç”Ÿäº§ç¯å¢ƒå¯ç”¨
- âœ¨ **å·¥ç¨‹æ€§**ï¼šå®Œæ•´çš„æ¶æ„è®¾è®¡å’Œå®ç°
- âœ¨ **æˆæœ¬æ„è¯†**ï¼šLLM é€‰å‹å’Œç¼“å­˜ä¼˜åŒ–
- âœ¨ **å¯æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•
- âœ¨ **æ™ºèƒ½åŒ–**ï¼šä»»åŠ¡è§„åˆ’ã€è´¨é‡è¯„ä¼°ã€ä¼šè¯è®°å¿†

---

## é™„å½•ï¼šå…³é”®ä»£ç ç¤ºä¾‹

### A1. ReactAgent æ ¸å¿ƒé€»è¾‘
```python
async def execute(
    self,
    query: str,
    session_id: Optional[str] = None,
    context: Optional[Dict[str, Any]] = None
) -> ReactResponse:
    """æ‰§è¡Œç”¨æˆ·æŸ¥è¯¢ï¼Œä½¿ç”¨ ReAct å¾ªç¯"""
    
    # 1. åŠ è½½ä¼šè¯å†å²
    conversation_history = await self.conversation_memory.get_history(session_id)
    
    # 2. åˆ›å»ºæ‰§è¡Œè®¡åˆ’
    plan = await self.task_planner.create_plan(
        query=query,
        conversation_history=conversation_history,
        context=context
    )
    
    # 3. æ‰§è¡Œ ReAct å¾ªç¯
    steps = await self._react_loop(query, plan, context)
    
    # 4. åˆæˆæœ€ç»ˆå“åº”
    final_response = await self._synthesize_response(query, steps, plan)
    
    # 5. è¯„ä¼°è¾“å‡ºè´¨é‡
    evaluation = await self.reflection_engine.evaluate_output(
        query=query,
        output=final_response,
        plan=plan,
        steps=steps
    )
    
    # 6. ä¿å­˜åˆ°ä¼šè¯å†å²
    await self.conversation_memory.save_interaction(
        session_id=session_id,
        query=query,
        response=response
    )
    
    return response
```

### A2. TaskPlanner å¤æ‚åº¦åˆ†ç±»
```python
async def _classify_complexity(
    self,
    query: str,
    conversation_history: List[ConversationTurn]
) -> str:
    """åˆ†ç±»æŸ¥è¯¢å¤æ‚åº¦ï¼ˆæ··åˆæ–¹æ³•ï¼šå¿«é€Ÿè§„åˆ™ + LLM æ™ºèƒ½åˆ¤æ–­ï¼‰"""
    
    # 1. å¿«é€Ÿè§„åˆ™è¿‡æ»¤ï¼šæ˜æ˜¾ç®€å•çš„æŸ¥è¯¢
    if self._is_obviously_simple(query):
        return "simple"
    
    # 2. å°è¯•ä½¿ç”¨ LLM æ™ºèƒ½åˆ¤æ–­
    if self.llm_service and self.llm_service.is_available():
        try:
            return await self._classify_with_llm(query, conversation_history)
        except Exception as e:
            logger.warning(f"LLM classification failed: {e}")
    
    # 3. è§„åˆ™å…œåº•
    return self._classify_with_rules(query, conversation_history)
```

---

## åä¸€ã€å¸¸è§é¢è¯•é—®é¢˜å‡†å¤‡

### ğŸ’¬ Q1: ä¸ºä»€ä¹ˆé€‰æ‹© Gemini 2.0 Flash è€Œä¸æ˜¯ GPTï¼Ÿ
> "æˆ‘åšäº†è¯¦ç»†çš„æŠ€æœ¯é€‰å‹å¯¹æ¯”ã€‚Gemini 2.0 Flash çš„æˆæœ¬æ˜¯ GPT-3.5 çš„ 1/5ï¼Œå“åº”é€Ÿåº¦æ›´å¿«ï¼ˆ<1ç§’ï¼‰ï¼Œè¿˜æœ‰æ¯å¤© 1500 æ¬¡å…è´¹é¢åº¦ã€‚å¯¹äºæˆ‘è¿™ä¸ªé¡¹ç›®ï¼Œæœˆæˆæœ¬ä» GPT çš„ 40 ç¾å…ƒé™åˆ° 2-3 ç¾å…ƒã€‚è€Œä¸” Gemini 2.0 å¯¹ä¸­æ–‡æ”¯æŒå¾ˆå¥½ï¼Œæ¨ç†èƒ½åŠ›ä¹Ÿè¶³å¤Ÿå¼ºã€‚ç‰¹åˆ«æ˜¯ 2.0 Flash ç›¸æ¯” 1.5 ç³»åˆ—æœ‰æ˜¾è‘—æå‡ï¼Œæ›´é€‚åˆ ReAct è¿™ç§éœ€è¦å¤šæ­¥æ¨ç†çš„åœºæ™¯ã€‚æœ€é‡è¦çš„æ˜¯ï¼ŒGemini 2.0 Flash åœ¨ä¿æŒä½æˆæœ¬çš„åŒæ—¶ï¼Œæ¨ç†è´¨é‡æ¥è¿‘ GPT-4ï¼Œéå¸¸é€‚åˆç”Ÿäº§ç¯å¢ƒã€‚"

### ğŸ’¬ Q2: ReAct å¾ªç¯æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ
> "æ ¸å¿ƒæ˜¯çŠ¶æ€ç®¡ç†å’Œè¿­ä»£æ§åˆ¶ã€‚æ¯æ¬¡è¿­ä»£åŒ…å«ä¸‰ä¸ªé˜¶æ®µï¼š
> 1. **Thought**ï¼šLLM åˆ†æå½“å‰çŠ¶æ€ï¼Œç”Ÿæˆæ¨ç†
> 2. **Action**ï¼šæ ¹æ®æ¨ç†é€‰æ‹©å·¥å…·å’Œå‚æ•°
> 3. **Observation**ï¼šæ‰§è¡Œå·¥å…·ï¼Œè®°å½•ç»“æœ
> 
> æ‰€æœ‰æ­¥éª¤ä¿å­˜åœ¨ steps åˆ—è¡¨ä¸­ï¼Œæ¯æ¬¡è¿­ä»£éƒ½èƒ½çœ‹åˆ°å®Œæ•´å†å²ã€‚ç»ˆæ­¢æ¡ä»¶æœ‰å››ä¸ªï¼šè¾¾åˆ°æœ€å¤§è¿­ä»£ï¼ˆ5æ¬¡ï¼‰ã€ä»»åŠ¡å®Œæˆã€å·¥å…·å¤±è´¥ã€è¶…æ—¶ã€‚å…³é”®æ˜¯æ¯æ¬¡è¿­ä»£éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå¤±è´¥ä¸å½±å“å‰é¢çš„æ­¥éª¤ï¼Œè¿™æ ·ç³»ç»Ÿæ›´ç¨³å®šã€‚"

### ğŸ’¬ Q3: å¦‚ä½•å¤„ç† LLM çš„ä¸ç¡®å®šæ€§ï¼Ÿ
> "æˆ‘ç”¨äº†å››ä¸ªç­–ç•¥ï¼š
> 1. **è´¨é‡è¯„ä¼°**ï¼šæ¯æ¬¡å“åº”éƒ½æœ‰å®Œæ•´æ€§å’Œè´¨é‡è¯„åˆ†ï¼Œä½äºé˜ˆå€¼ä¼šé‡è¯•
> 2. **å·¥å…·éªŒè¯**ï¼šLLM é€‰æ‹©çš„å·¥å…·å¿…é¡»åœ¨æ³¨å†Œè¡¨ä¸­ï¼Œé˜²æ­¢å¹»è§‰
> 3. **å‚æ•°éªŒè¯**ï¼šå·¥å…·å‚æ•°å¿…é¡»ç¬¦åˆ schemaï¼Œç±»å‹å’Œå¿…å¡«é¡¹éƒ½è¦æ£€æŸ¥
> 4. **é™çº§æ–¹æ¡ˆ**ï¼šLLM ä¸å¯ç”¨æ—¶ï¼Œç³»ç»Ÿä»èƒ½å¤„ç†ç®€å•æŸ¥è¯¢
> 
> è¿™æ ·æ—¢åˆ©ç”¨äº† LLM çš„æ™ºèƒ½ï¼Œåˆä¿è¯äº†ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚"

### ğŸ’¬ Q4: ä¼šè¯è®°å¿†æ˜¯å¦‚ä½•ç®¡ç†çš„ï¼Ÿ
> "ä½¿ç”¨ PostgreSQL æŒä¹…åŒ–å­˜å‚¨ï¼Œè®¾è®¡äº†ä¸¤å¼ è¡¨ï¼š
> 1. **agent_conversations**ï¼šå­˜å‚¨æ¯è½®å¯¹è¯çš„å®Œæ•´ä¿¡æ¯ï¼ˆæŸ¥è¯¢ã€å“åº”ã€æ­¥éª¤ã€è¯„ä¼°ï¼‰
> 2. **agent_sessions**ï¼šå­˜å‚¨ä¼šè¯å…ƒæ•°æ®ï¼ˆç”¨æˆ·IDã€ä¸Šä¸‹æ–‡ã€æ‘˜è¦ï¼‰
> 
> æ£€ç´¢ç­–ç•¥æ˜¯æœ€è¿‘ 10 æ¡å®Œæ•´ä¿å­˜ï¼Œæ›´æ—©çš„ç”Ÿæˆæ‘˜è¦ã€‚æ‘˜è¦ä½¿ç”¨ LLM ç”Ÿæˆï¼ŒåŒ…å«å…³é”®ä¸»é¢˜ã€é‡è¦ä¿¡æ¯ã€ç”¨æˆ·åå¥½ã€‚24 å°æ—¶æ— æ´»åŠ¨çš„ä¼šè¯è‡ªåŠ¨æ¸…ç†ã€‚è¿™æ ·æ—¢ä¿è¯äº†ä¸Šä¸‹æ–‡ç†è§£ï¼Œåˆæ§åˆ¶äº†å­˜å‚¨æˆæœ¬ã€‚"

### ğŸ’¬ Q5: å·¥å…·ç¼–æ’ç³»ç»Ÿçš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ
> "ä¸‰ä¸ªæ ¸å¿ƒä¼˜åŠ¿ï¼š
> 1. **ä¾èµ–ç®¡ç†**ï¼šè‡ªåŠ¨å¤„ç†å·¥å…·é—´çš„ä¾èµ–å…³ç³»ï¼Œç¬¬äºŒä¸ªå·¥å…·å¯ä»¥å¼•ç”¨ç¬¬ä¸€ä¸ªå·¥å…·çš„ç»“æœ
> 2. **å‚æ•°è§£æ**ï¼šæ”¯æŒ ${step1.result} è¿™æ ·çš„å¼•ç”¨è¯­æ³•ï¼Œè‡ªåŠ¨è§£æå’Œä¼ é€’
> 3. **ç»“æœç¼“å­˜**ï¼š5 åˆ†é’Ÿå†…ç›¸åŒå·¥å…·è°ƒç”¨ç›´æ¥è¿”å›ç¼“å­˜ï¼Œé¿å…é‡å¤æ‰§è¡Œ
> 
> è¿™ä¸ªè®¾è®¡è®© Agent èƒ½å¤Ÿæ‰§è¡Œå¤æ‚çš„å·¥å…·é“¾ï¼Œæ¯”å¦‚å…ˆæœç´¢æ–°é—»ï¼Œå†åˆ†æè¶‹åŠ¿ï¼Œæœ€åç”ŸæˆæŠ¥å‘Šã€‚æ¯ä¸ªæ­¥éª¤çš„ç»“æœéƒ½èƒ½è¢«åç»­æ­¥éª¤ä½¿ç”¨ã€‚"

### ğŸ’¬ Q6: é‡åˆ°çš„æœ€å¤§æŠ€æœ¯æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ
> "æœ€å¤§æŒ‘æˆ˜æ˜¯**å¦‚ä½•å®ç°ç¨³å®šçš„ ReAct å¾ªç¯**ã€‚é—®é¢˜æœ‰ä¸‰ä¸ªï¼š
> 1. **çŠ¶æ€ç®¡ç†**ï¼šå¦‚ä½•åœ¨å¤šæ¬¡è¿­ä»£ä¸­ä¿æŒçŠ¶æ€ä¸€è‡´ï¼Ÿ
> 2. **ç»ˆæ­¢æ¡ä»¶**ï¼šå¦‚ä½•åˆ¤æ–­ä»»åŠ¡å®Œæˆï¼Œé¿å…æ— é™å¾ªç¯ï¼Ÿ
> 3. **é”™è¯¯æ¢å¤**ï¼šå¦‚ä½•å¤„ç†ä¸­é€”å¤±è´¥ï¼Œæ˜¯é‡è¯•è¿˜æ˜¯è·³è¿‡ï¼Ÿ
> 
> è§£å†³æ–¹æ¡ˆæ˜¯è®¾è®¡äº†å®Œæ•´çš„çŠ¶æ€æœºï¼Œæ¯ä¸ªæ­¥éª¤éƒ½æœ‰æ˜ç¡®çš„çŠ¶æ€ï¼ˆpending/running/completed/failedï¼‰ã€‚ç»ˆæ­¢æ¡ä»¶æœ‰å¤šä¸ªï¼šæœ€å¤§è¿­ä»£ã€è´¨é‡è¯„ä¼°ã€å·¥å…·å¤±è´¥ã€‚é”™è¯¯æ¢å¤ç­–ç•¥æ˜¯å¿…éœ€å·¥å…·å¤±è´¥åˆ™ç»ˆæ­¢ï¼Œå¯é€‰å·¥å…·å¤±è´¥åˆ™è·³è¿‡ã€‚è¿™ä¸ªè¿‡ç¨‹è®©æˆ‘æ·±åˆ»ç†è§£äº†**çŠ¶æ€ç®¡ç†çš„é‡è¦æ€§**ã€‚"

### ğŸ’¬ Q7: å¦‚æœè®©ä½ é‡æ–°è®¾è®¡ï¼Œä¼šæœ‰ä»€ä¹ˆæ”¹è¿›ï¼Ÿ
> "ä¸‰ä¸ªæ–¹å‘ï¼š
> 1. **å¤š Agent åä½œ**ï¼šç›®å‰æ˜¯å•ä¸ª Agentï¼Œå¯ä»¥è®¾è®¡å¤šä¸ªä¸“ä¸š Agent åä½œå®Œæˆå¤æ‚ä»»åŠ¡
> 2. **è‡ªä¸»å­¦ä¹ **ï¼šä»ç”¨æˆ·åé¦ˆä¸­å­¦ä¹ ï¼Œä¼˜åŒ–å·¥å…·é€‰æ‹©å’Œå‚æ•°è®¾ç½®
> 3. **å¤šæ¨¡æ€å¤„ç†**ï¼šæ”¯æŒå›¾ç‰‡ã€è§†é¢‘ã€ä»£ç ç­‰å¤šç§è¾“å…¥è¾“å‡º
> 
> è¿™äº›éƒ½æ˜¯ä» MVP åˆ°ç”Ÿäº§çº§ç³»ç»Ÿçš„æ”¹è¿›ï¼Œä½“ç°äº†å·¥ç¨‹åŒ–æ€ç»´ã€‚"

### ğŸ’¬ Q7.5: SSE æµå¼è¾“å‡ºæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ
> "SSE æµå¼è¾“å‡ºæ˜¯æˆ‘æœ€è¿‘å®Œæˆçš„é‡è¦åŠŸèƒ½ï¼Œè®©ç”¨æˆ·èƒ½å®æ—¶çœ‹åˆ° Agent çš„æ€è€ƒè¿‡ç¨‹ã€‚
> 
> **æ ¸å¿ƒæ¶æ„**æ˜¯å¼‚æ­¥é˜Ÿåˆ—æ¨¡å¼ï¼š
> 1. åç«¯ä½¿ç”¨ asyncio.Queue åœ¨ ReAct æ‰§è¡Œå’Œ SSE å‘é€ä¹‹é—´ä¼ é€’äº‹ä»¶
> 2. ReactAgent æ¥å— streaming_callback å‚æ•°ï¼Œåœ¨æ¯ä¸ªå…³é”®èŠ‚ç‚¹ï¼ˆæ€è€ƒã€è¡ŒåŠ¨ã€è§‚å¯Ÿï¼‰è°ƒç”¨å›è°ƒ
> 3. å›è°ƒå‡½æ•°å°†äº‹ä»¶æ”¾å…¥é˜Ÿåˆ—ï¼Œevent_generator ä»é˜Ÿåˆ—å–å‡ºå¹¶é€šè¿‡ SSE å‘é€ç»™å‰ç«¯
> 4. å‰ç«¯ä½¿ç”¨ EventSource API ç›‘å¬äº‹ä»¶ï¼Œå®æ—¶æ›´æ–° UI
> 
> **å…³é”®æŠ€æœ¯ç‚¹**ï¼š
> 1. **æˆ˜ç•¥æ€§å»¶è¿Ÿ**ï¼šæ¯ä¸ªäº‹ä»¶åæ·»åŠ  300ms å»¶è¿Ÿï¼Œç¡®ä¿ç”¨æˆ·èƒ½çœ‹åˆ°æ¸è¿›å¼æ›´æ–°ï¼Œé¿å… React æ‰¹é‡å¤„ç†
> 2. **é—­åŒ…é—®é¢˜**ï¼šä½¿ç”¨ Ref å­˜å‚¨æœ€æ–°æ­¥éª¤ï¼Œè§£å†³ complete äº‹ä»¶é—­åŒ…æ•è·åˆå§‹å€¼çš„é—®é¢˜
> 3. **æ‰“å­—æœºæ•ˆæœ**ï¼šå“åº”å†…å®¹åˆ†å—å‘é€ï¼ˆ20 å­—ç¬¦/å—ï¼Œ50ms å»¶è¿Ÿï¼‰ï¼Œæ¨¡æ‹Ÿ ChatGPT çš„æ‰“å­—æ•ˆæœ
> 4. **SSE åè®®**ï¼šæ­£ç¡®è®¾ç½®å“åº”å¤´ï¼ˆCache-Controlã€Connectionã€X-Accel-Bufferingï¼‰
> 
> **ç”¨æˆ·ä½“éªŒæå‡**ï¼šä»'é»‘ç›’ç­‰å¾…'å˜æˆ'é€æ˜å¯è§'ï¼Œç”¨æˆ·èƒ½çœ‹åˆ° Agent ä¸€æ­¥æ­¥æ€è€ƒã€é€‰æ‹©å·¥å…·ã€æ‰§è¡Œè¡ŒåŠ¨ã€è§‚å¯Ÿç»“æœï¼Œæœ€åé€å­—æ˜¾ç¤ºå“åº”ã€‚è¿™å¤§å¤§å¢å¼ºäº†ä¿¡ä»»æ„Ÿå’Œå‚ä¸æ„Ÿã€‚"

### ğŸ’¬ Q8: è¿™ä¸ªé¡¹ç›®æœ€å¤§çš„æ”¶è·æ˜¯ä»€ä¹ˆï¼Ÿ
> "ä¸‰ä¸ªå±‚é¢çš„æ”¶è·ï¼š
> 1. **æŠ€æœ¯å±‚é¢**ï¼šæ·±å…¥ç†è§£äº† ReAct Agent çš„å®Œæ•´å®ç°ï¼Œä»ä»»åŠ¡è§„åˆ’ã€å·¥å…·ç¼–æ’åˆ°ä¼šè¯ç®¡ç†
> 2. **æ¶æ„å±‚é¢**ï¼šå®è·µäº†åˆ†å±‚æ¶æ„å’Œç»„ä»¶åŒ–è®¾è®¡ï¼Œç†è§£äº†å¦‚ä½•é™ä½ç³»ç»Ÿå¤æ‚åº¦
> 3. **å·¥ç¨‹å±‚é¢**ï¼šå­¦ä¼šäº†å…¨é“¾è·¯æ€è€ƒï¼Œä»éœ€æ±‚åˆ†æã€æŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡åˆ°éƒ¨ç½²è¿ç»´
> 
> æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘æ„è¯†åˆ°**å¤šæ­¥æ¨ç†èƒ½åŠ›æ˜¯ AI Agent çš„æ ¸å¿ƒä»·å€¼**ï¼Œè¿™æ¯”å•çº¯çš„å·¥å…·è°ƒç”¨æ›´æœ‰æ„ä¹‰ã€‚"

---

## ğŸ“š é¢è¯•å‡†å¤‡æ¸…å•

### é¢è¯•å‰å‡†å¤‡
- [ ] ç†Ÿæ‚‰ ReAct æ¨ç†å¾ªç¯çš„è®¾è®¡æ€è·¯å’Œä»£ç å®ç°
- [ ] å‡†å¤‡ LLM é€‰å‹å¯¹æ¯”çš„æ•°æ®å’Œç†ç”±
- [ ] å›é¡¾å››å¤§æ ¸å¿ƒç»„ä»¶çš„èŒè´£å’Œäº¤äº’
- [ ] å‡†å¤‡ä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½æ¼”ç¤ºæµç¨‹ï¼ˆä»æŸ¥è¯¢åˆ°å“åº”ï¼‰
- [ ] æ€è€ƒå¯èƒ½çš„æ”¹è¿›æ–¹å‘ï¼ˆå¤š Agent åä½œã€è‡ªä¸»å­¦ä¹ ç­‰ï¼‰

### é¢è¯•ä¸­æ³¨æ„
- [ ] ç”¨å…·ä½“æ•°å­—è¯´è¯ï¼ˆæˆæœ¬ã€æ€§èƒ½ã€ä»£ç é‡ï¼‰
- [ ] å¼ºè°ƒæ¶æ„è®¾è®¡è€Œéå•çº¯å®ç°
- [ ] å±•ç¤ºå·¥ç¨‹æ€ç»´ï¼ˆæˆæœ¬ã€æ€§èƒ½ã€å¯ç»´æŠ¤æ€§ï¼‰
- [ ] å‡†å¤‡å¥½å›ç­”"ä¸ºä»€ä¹ˆ"è€Œé"æ˜¯ä»€ä¹ˆ"
- [ ] ä¿æŒè‡ªä¿¡ä½†ä¸å‚²æ…¢

### é¢è¯•åæ€»ç»“
- [ ] è®°å½•é¢è¯•å®˜å…³æ³¨çš„æŠ€æœ¯ç‚¹
- [ ] åæ€å›ç­”ä¸å¤Ÿå¥½çš„é—®é¢˜
- [ ] è¡¥å……ç›¸å…³æŠ€æœ¯çŸ¥è¯†
- [ ] ä¼˜åŒ–é¡¹ç›®æ–‡æ¡£å’Œä»£ç 

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼š2.0  
**æœ€åæ›´æ–°**ï¼š2024-12-16  
**ä½œè€…**ï¼šshanshan

**ä½¿ç”¨å»ºè®®**ï¼š
- ğŸ“– é¢è¯•å‰ä¸€å¤©ï¼šé€šè¯»å…¨æ–‡ï¼Œé‡ç‚¹çœ‹å£å¤´è¡¨è¿°ç‰ˆæœ¬
- â° é¢è¯•å‰ 5 åˆ†é’Ÿï¼šçœ‹å¿«é€Ÿå‚è€ƒå¡
- ğŸ’¬ é¢è¯•ä¸­ï¼šæ ¹æ®é¢è¯•å®˜å…´è¶£æ·±å…¥æŸä¸ªç« èŠ‚
- ğŸ¯ é¢è¯•åï¼šæ ¹æ®åé¦ˆä¼˜åŒ–é¡¹ç›®å’Œæ–‡æ¡£
