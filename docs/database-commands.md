# 数据库管理命令说明

## 📋 可用命令概览

### AIGC内容管理
- `npm run db:manage-aigc` - 管理AIGC图片作品集
- `npm run db:manage-aigc-master` - AIGC内容统一管理工具（支持图片、视频、音乐）

### 博客管理
- `npm run db:manage-blog` - 管理博客文章、标签、评论

### 数据库初始化
- `npm run db:init` - 初始化AIGC数据库表结构
- `npm run db:test` - 测试数据库连接配置

## 🎨 AIGC内容管理

### 1. 图片作品集管理 (`npm run db:manage-aigc`)
专门用于管理AIGC图片作品集，功能包括：
- 查看所有图片作品集
- 查看作品集详情
- 查看作品集图片
- 删除作品集
- 删除图片
- 更新作品集信息
- 数据库统计信息

### 2. AIGC统一管理工具 (`npm run db:manage-aigc-master`)
统一的AIGC内容管理工具，支持多种内容类型：

#### 当前支持
- 🖼️ 图片作品集管理
- 🎬 视频作品管理（预留）
- 🎵 音乐作品管理（预留）
- 📊 全局统计信息

#### 功能特点
- 模块化设计，便于扩展
- 统一的用户界面
- 全局统计信息
- 为未来功能预留空间

## 📝 博客管理

### 博客数据库管理 (`npm run db:manage-blog`)
专门用于管理博客相关内容，功能包括：
- 查看所有博客文章
- 查看博客文章详情
- 查看博客标签
- 查看博客评论
- 删除博客文章
- 数据库统计信息
- 查看数据库表结构

## 🗄️ 数据库表结构

### AIGC图片模块
- `artwork_collections` - 作品集表
- `artwork_images` - 图片资源表
- `artwork_likes` - 点赞记录表

### 博客模块
- `blog_posts` - 博客文章表
- `blog_tags` - 博客标签表
- `blog_comments` - 博客评论表
- `blog_post_tags` - 文章标签关联表

### 预留模块
- 视频作品表（待开发）
- 音乐作品表（待开发）

## 🚀 使用示例

### 查看图片作品集
```bash
npm run db:manage-aigc
# 选择 1 查看所有图片作品集
```

### 管理博客文章
```bash
npm run db:manage-blog
# 选择 1 查看所有博客文章
```

### 使用统一管理工具
```bash
npm run db:manage-aigc-master
# 选择 1 进入图片管理
# 选择 4 查看全局统计
```

## 🔧 扩展说明

### 添加新的AIGC模块
1. 在 `scripts/manage-aigc-master.ts` 中添加新模块菜单
2. 创建对应的数据库表
3. 创建对应的模型文件
4. 实现具体的管理功能

### 添加新的管理功能
1. 在对应的管理脚本中添加新功能
2. 更新菜单选项
3. 实现具体的业务逻辑

## 📊 统计信息

### 全局统计
- 图片作品集数量
- 图片文件数量
- 博客文章数量
- 各模块状态

### 模块统计
- 作品集统计
- 文件统计
- 用户行为统计
- 性能指标

## 🔒 安全注意事项

1. **数据库连接**
   - 确保环境变量正确配置
   - 使用强密码
   - 限制数据库访问权限

2. **操作安全**
   - 删除操作需要确认
   - 重要数据建议备份
   - 记录操作日志

3. **权限控制**
   - 限制管理工具访问
   - 定期更新密码
   - 监控异常操作

## 🛠️ 故障排除

### 常见问题

1. **数据库连接失败**
   - 检查环境变量配置
   - 确认数据库服务状态
   - 验证网络连接

2. **表不存在错误**
   - 运行 `npm run db:init` 初始化数据库
   - 检查数据库schema
   - 确认表名正确

3. **权限错误**
   - 检查数据库用户权限
   - 确认数据库名称
   - 验证连接参数

### 获取帮助
如果遇到问题，请检查：
1. 数据库服务状态
2. 环境变量配置
3. 网络连接
4. 错误日志
5. 相关文档
