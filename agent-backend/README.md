# AI News Agent Backend

åŸºäº FastAPI çš„ AI æ–°é—» Agent åç«¯æœåŠ¡ï¼Œé‡‡ç”¨æ’ä»¶åŒ–æ¶æ„è®¾è®¡ï¼Œæ”¯æŒå‘½ä»¤å¼å’Œè‡ªç„¶è¯­è¨€è¾“å…¥ã€‚

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
- [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [æ¶æ„è®¾è®¡](#-æ¶æ„è®¾è®¡)
- [API æ–‡æ¡£](#-api-æ–‡æ¡£)
- [å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
- [éƒ¨ç½²è¯´æ˜](#-éƒ¨ç½²è¯´æ˜)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ 1ï¼šDocker æ··åˆæ¨¡å¼ï¼ˆæ¨èï¼‰

**ä¼˜åŠ¿**ï¼šåç«¯å®¹å™¨åŒ–ï¼Œå‰ç«¯æœ¬åœ°è¿è¡Œï¼Œå…¼é¡¾ç¯å¢ƒéš”ç¦»å’Œè°ƒè¯•ä¾¿åˆ©æ€§

```bash
# ä¸€é”®å¯åŠ¨å…¨æ ˆå¼€å‘ç¯å¢ƒ
./scripts/startup/full-stack.sh start

# æœåŠ¡åœ°å€ï¼š
# - å‰ç«¯: http://localhost:3000/agent
# - åç«¯: http://localhost:8000
# - API æ–‡æ¡£: http://localhost:8000/docs
```

**å·¥ä½œåŸç†**ï¼š
- Python åç«¯è¿è¡Œåœ¨ Docker å®¹å™¨ä¸­ï¼ˆè‡ªåŠ¨çƒ­é‡è½½ï¼‰
- Next.js å‰ç«¯è¿è¡Œåœ¨æœ¬åœ°ï¼ˆä¿æŒ IDE è°ƒè¯•åŠŸèƒ½ï¼‰
- ä¸€é”®å¯åŠ¨/åœæ­¢ï¼Œç¯å¢ƒéš”ç¦»

### æ–¹å¼ 2ï¼šä»…å¯åŠ¨åç«¯

```bash
# è¿›å…¥ Docker ç›®å½•
cd agent-backend/docker

# å¯åŠ¨åç«¯æœåŠ¡
./backend.sh start

# æŸ¥çœ‹æ—¥å¿—
./backend.sh logs

# åœæ­¢æœåŠ¡
./backend.sh stop
```

### æ–¹å¼ 3ï¼šæœ¬åœ°å¼€å‘ï¼ˆä¸æ¨èï¼‰

```bash
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
cd agent-backend
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. å¯åŠ¨æœåŠ¡
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### éªŒè¯å®‰è£…

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# æµ‹è¯•å‘½ä»¤å¼è¾“å…¥
curl -X POST http://localhost:8000/api/agent/execute \
  -H "Content-Type: application/json" \
  -d '{"input": "/latest 5"}'

# æµ‹è¯•è‡ªç„¶è¯­è¨€è¾“å…¥
curl -X POST http://localhost:8000/api/agent/execute \
  -H "Content-Type: application/json" \
  -d '{"input": "æœ€è¿‘æœ‰ä»€ä¹ˆAIæ–°é—»ï¼Ÿ"}'
```

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. ç»Ÿä¸€è¾“å…¥å¤„ç†

æ”¯æŒä¸¤ç§è¾“å…¥æ–¹å¼ï¼Œç»Ÿä¸€å¤„ç†æµç¨‹ï¼š

**å‘½ä»¤å¼è¾“å…¥**ï¼š
```bash
/latest 5          # è·å–æœ€æ–° 5 æ¡èµ„è®¯
/trending          # è·å–çƒ­é—¨è¶‹åŠ¿
/deepdive GPT-4    # æ·±åº¦åˆ†æç‰¹å®šä¸»é¢˜
/help              # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

**è‡ªç„¶è¯­è¨€è¾“å…¥**ï¼š
```bash
"æœ€è¿‘æœ‰ä»€ä¹ˆAIæ–°é—»ï¼Ÿ"
"OpenAI æœ‰ä»€ä¹ˆæ–°è¿›å±•ï¼Ÿ"
"æ·±åº¦åˆ†æ GPT-4 çš„æœ€æ–°å‘å±•"
```

### 2. æ™ºèƒ½æ„å›¾åˆ†æ

```
ç”¨æˆ·è¾“å…¥ â†’ Intent Analyzer â†’ ç»Ÿä¸€ Intent æ¨¡å‹ â†’ æ’ä»¶æ‰§è¡Œ
```

**Intent æ¨¡å‹**ï¼š
```python
{
  "command": "/latest",           # æ˜ å°„åˆ°çš„å‘½ä»¤
  "params": {"count": 5},         # å‚æ•°
  "source": "natural_language",   # æ¥æº
  "confidence": 0.95,             # ç½®ä¿¡åº¦
  "original_input": "æœ€è¿‘æœ‰ä»€ä¹ˆAIæ–°é—»ï¼Ÿ",
  "keywords": ["AI", "æ–°é—»"]
}
```

### 3. æ’ä»¶åŒ–æ¶æ„

- ğŸ”Œ æ˜“äºæ‰©å±•çš„æ’ä»¶ç³»ç»Ÿ
- ğŸ“° AI æ–°é—»èµ„è®¯æ”¶é›†å’Œåˆ†æ
- ğŸ¤– æ™ºèƒ½ Agent èƒ½åŠ›ï¼ˆæ„å›¾ç†è§£ã€ä¸Šä¸‹æ–‡åˆ†æï¼‰
- ğŸš€ å¼‚æ­¥å¤„ç†ï¼Œé«˜æ€§èƒ½
- ğŸ”„ Redis ç¼“å­˜æ”¯æŒ
- ğŸ›¡ï¸ CORS å’Œå®‰å…¨é…ç½®

---

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
agent-backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                 # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config.py               # é…ç½®ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ api/routes/             # API è·¯ç”±å±‚
â”‚   â”‚   â””â”€â”€ agent.py            # Agent API ç«¯ç‚¹
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ intent_analyzer.py  # æ„å›¾åˆ†æå™¨ï¼ˆç»Ÿä¸€è¾“å…¥å¤„ç†ï¼‰
â”‚   â”‚   â””â”€â”€ plugin_manager.py   # æ’ä»¶ç®¡ç†å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ intent.py           # Intent æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ base.py             # åŸºç¡€æ¨¡å‹å’Œæ’ä»¶æŠ½è±¡ç±»
â”‚   â”‚   â””â”€â”€ news.py             # æ–°é—»æ•°æ®æ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ plugins/                # æ’ä»¶å®ç°
â”‚   â”‚   â””â”€â”€ news_plugin.py      # AI èµ„è®¯æ’ä»¶
â”‚   â”‚
â”‚   â””â”€â”€ services/               # æœåŠ¡å±‚
â”‚       â””â”€â”€ news_collector.py   # æ–°é—»æ”¶é›†æœåŠ¡
â”‚
â”œâ”€â”€ docker/                     # Docker é…ç½®
â”‚   â”œâ”€â”€ Dockerfile.dev          # å¼€å‘ç¯å¢ƒé•œåƒ
â”‚   â”œâ”€â”€ docker-compose.dev.yml  # Docker Compose é…ç½®
â”‚   â”œâ”€â”€ backend.sh              # åç«¯ç®¡ç†è„šæœ¬
â”‚   â””â”€â”€ README.md               # Docker ä½¿ç”¨è¯´æ˜
â”‚
â”œâ”€â”€ tests/                      # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ test_models.py
â”‚   â”œâ”€â”€ test_plugins.py
â”‚   â””â”€â”€ test_services.py
â”‚
â”œâ”€â”€ requirements.txt            # Python ä¾èµ–
â”œâ”€â”€ README.md                   # æœ¬æ–‡æ¡£
â”œâ”€â”€ DESIGN.md                   # å®Œæ•´è®¾è®¡æ–‡æ¡£
â””â”€â”€ GUIDE.md                    # å¼€å‘æŒ‡å—
```

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### å®Œæ•´è¯·æ±‚æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·è¾“å…¥                                   â”‚
â”‚              "/latest 5" æˆ– "æœ€è¿‘æœ‰ä»€ä¹ˆAIæ–°é—»ï¼Ÿ"                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Frontend (React)                               â”‚
â”‚                   AgentTerminal Component                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Next.js API Proxy                              â”‚
â”‚                   /api/agent/execute                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Python Backend (FastAPI)                       â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  1. API Route (/api/agent/execute)                         â”‚ â”‚
â”‚  â”‚     - æ¥æ”¶ AgentRequest                                     â”‚ â”‚
â”‚  â”‚     - æå– user_input                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  2. Intent Analyzer (æ„å›¾åˆ†æå™¨)                           â”‚ â”‚
â”‚  â”‚     - è¯†åˆ«è¾“å…¥ç±»å‹ï¼ˆå‘½ä»¤å¼ vs è‡ªç„¶è¯­è¨€ï¼‰                    â”‚ â”‚
â”‚  â”‚     - è½¬æ¢ä¸ºç»Ÿä¸€çš„ Intent æ¨¡å‹                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â†“ å‘½ä»¤å¼                              â†“ è‡ªç„¶è¯­è¨€          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ _parse_command() â”‚              â”‚ _fallback_parse()        â”‚ â”‚
â”‚  â”‚ ç›´æ¥è§£æ          â”‚              â”‚ å…³é”®è¯åŒ¹é…ï¼ˆå½“å‰ï¼‰        â”‚ â”‚
â”‚  â”‚ ç½®ä¿¡åº¦: 1.0       â”‚              â”‚ ç½®ä¿¡åº¦: 0.6-0.7          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                          â”‚ â”‚
â”‚                                     â”‚ _parse_natural_language()â”‚ â”‚
â”‚                                     â”‚ LLM åˆ†æï¼ˆæœªæ¥ï¼‰          â”‚ â”‚
â”‚                                     â”‚ ç½®ä¿¡åº¦: 0.9+             â”‚ â”‚
â”‚                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  3. ç»Ÿä¸€ Intent æ¨¡å‹                                        â”‚ â”‚
â”‚  â”‚     {                                                       â”‚ â”‚
â”‚  â”‚       command: "/latest",                                  â”‚ â”‚
â”‚  â”‚       params: {count: 5},                                  â”‚ â”‚
â”‚  â”‚       source: "command" | "natural_language",              â”‚ â”‚
â”‚  â”‚       confidence: 0.6-1.0                                  â”‚ â”‚
â”‚  â”‚     }                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  4. Plugin Manager                                         â”‚ â”‚
â”‚  â”‚     - æ ¹æ® Intent.command è·¯ç”±åˆ°å¯¹åº”æ’ä»¶                    â”‚ â”‚
â”‚  â”‚     - éªŒè¯æ’ä»¶å¯ç”¨æ€§                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  5. News Plugin                                            â”‚ â”‚
â”‚  â”‚     - å¤„ç† /latest, /trending, /deepdive ç­‰å‘½ä»¤            â”‚ â”‚
â”‚  â”‚     - è°ƒç”¨ News Collector Service                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  6. News Collector Service                                 â”‚ â”‚
â”‚  â”‚     - å½“å‰ï¼šè¿”å› mock æ•°æ®                                  â”‚ â”‚
â”‚  â”‚     - æœªæ¥ï¼šRSS Aggregator + HN API                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  7. æ ¼å¼åŒ–å“åº”                                              â”‚ â”‚
â”‚  â”‚     AgentResponse {                                        â”‚ â”‚
â”‚  â”‚       success: true,                                       â”‚ â”‚
â”‚  â”‚       data: "formatted news",                              â”‚ â”‚
â”‚  â”‚       type: "text",                                        â”‚ â”‚
â”‚  â”‚       plugin: "news"                                       â”‚ â”‚
â”‚  â”‚     }                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Frontend æ˜¾ç¤ºç»“æœ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

#### 1. Intent Analyzerï¼ˆæ„å›¾åˆ†æå™¨ï¼‰

**èŒè´£**ï¼šå°†æ‰€æœ‰è¾“å…¥è½¬æ¢ä¸ºç»Ÿä¸€çš„ Intent æ¨¡å‹

```python
class IntentAnalyzer:
    async def parse_input(self, user_input: str) -> Intent:
        """ç»Ÿä¸€å…¥å£ï¼šå¤„ç†å‘½ä»¤å¼å’Œè‡ªç„¶è¯­è¨€è¾“å…¥"""
        if user_input.startswith('/'):
            return self._parse_command(user_input)
        else:
            return self._fallback_parse(user_input)  # å½“å‰ï¼šå…³é”®è¯åŒ¹é…
            # return await self._parse_natural_language(user_input)  # æœªæ¥ï¼šLLM
```

#### 2. Plugin Managerï¼ˆæ’ä»¶ç®¡ç†å™¨ï¼‰

**èŒè´£**ï¼šç®¡ç†æ’ä»¶æ³¨å†Œå’Œå‘½ä»¤è·¯ç”±

```python
class PluginManager:
    def register_plugin(self, plugin: BasePlugin):
        """æ³¨å†Œæ’ä»¶"""
    
    async def execute_intent(self, intent: Intent) -> AgentResponse:
        """æ ¹æ® Intent æ‰§è¡Œå¯¹åº”æ’ä»¶"""
```

#### 3. News Pluginï¼ˆæ–°é—»æ’ä»¶ï¼‰

**èŒè´£**ï¼šå¤„ç†æ‰€æœ‰æ–°é—»ç›¸å…³è¯·æ±‚

æ”¯æŒçš„å‘½ä»¤ï¼š
- `/latest [count]` - è·å–æœ€æ–°èµ„è®¯
- `/trending [category]` - è·å–çƒ­é—¨è¶‹åŠ¿
- `/deepdive <topic>` - æ·±åº¦åˆ†æ
- `/categories` - æ˜¾ç¤ºåˆ†ç±»
- `/help` - æ˜¾ç¤ºå¸®åŠ©

---

## ğŸ“¡ API æ–‡æ¡£

### æ ¸å¿ƒç«¯ç‚¹

#### POST /api/agent/execute

æ‰§è¡Œ Agent å‘½ä»¤æˆ–è‡ªç„¶è¯­è¨€æŸ¥è¯¢

**è¯·æ±‚ä½“**ï¼š
```json
{
  "input": "/latest 5",  // æˆ– "æœ€è¿‘æœ‰ä»€ä¹ˆAIæ–°é—»ï¼Ÿ"
  "session_id": "user_123"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": "ğŸ“° æœ€æ–° AI èµ„è®¯...",
  "type": "text",
  "plugin": "news",
  "command": "/latest",
  "metadata": {
    "count": 5,
    "source": "command",
    "confidence": 1.0
  }
}
```

#### GET /api/agent/plugins

è·å–æ‰€æœ‰å¯ç”¨æ’ä»¶

**å“åº”**ï¼š
```json
{
  "plugins": [
    {
      "id": "news",
      "name": "AIèµ„è®¯æ’ä»¶",
      "description": "è·å–å’Œåˆ†æAIé¢†åŸŸæœ€æ–°èµ„è®¯",
      "commands": ["/latest", "/trending", "/deepdive"]
    }
  ]
}
```

#### GET /health

å¥åº·æ£€æŸ¥

**å“åº”**ï¼š
```json
{
  "status": "healthy",
  "version": "2.0.0",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

### å®Œæ•´ API æ–‡æ¡£

å¯åŠ¨æœåŠ¡åè®¿é—®ï¼šhttp://localhost:8000/docs

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### å¸¸ç”¨å‘½ä»¤

```bash
# Docker å¼€å‘ï¼ˆæ¨èï¼‰
cd agent-backend/docker

./backend.sh start      # å¯åŠ¨æœåŠ¡
./backend.sh stop       # åœæ­¢æœåŠ¡
./backend.sh restart    # é‡å¯æœåŠ¡
./backend.sh logs       # æŸ¥çœ‹æ—¥å¿—
./backend.sh shell      # è¿›å…¥å®¹å™¨
./backend.sh test       # è¿è¡Œæµ‹è¯•
./backend.sh build      # é‡æ–°æ„å»ºé•œåƒ
./backend.sh status     # æŸ¥çœ‹çŠ¶æ€
```

### æ·»åŠ æ–°æ’ä»¶

1. åˆ›å»ºæ’ä»¶ç±»ï¼š

```python
# app/plugins/my_plugin.py
from app.models.base import BasePlugin, AgentCommand, AgentRequest, AgentResponse

class MyPlugin(BasePlugin):
    def __init__(self):
        super().__init__(
            name="æˆ‘çš„æ’ä»¶",
            plugin_id="my_plugin",
            description="æ’ä»¶æè¿°"
        )

    def get_commands(self):
        return [
            AgentCommand(
                command="/mycommand",
                description="æˆ‘çš„å‘½ä»¤",
                usage="/mycommand [param]",
                examples=["/mycommand hello"]
            )
        ]

    async def execute(self, request: AgentRequest):
        # å¤„ç†é€»è¾‘
        return AgentResponse(
            success=True,
            data="å“åº”æ•°æ®",
            type="text",
            plugin=self.id,
            command=request.command
        )
```

2. æ³¨å†Œæ’ä»¶ï¼š

```python
# app/core/plugin_manager.py
from app.plugins.my_plugin import MyPlugin

# åœ¨ __init__ ä¸­æ³¨å†Œ
self.register_plugin(MyPlugin())
```

### è¿è¡Œæµ‹è¯•

```bash
# ä½¿ç”¨ Docker
cd agent-backend/docker
./backend.sh test

# æˆ–æœ¬åœ°è¿è¡Œ
cd agent-backend
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_plugins.py -v

# æŸ¥çœ‹è¦†ç›–ç‡
pytest --cov=app tests/
```

### ç¯å¢ƒé…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# åŸºç¡€é…ç½®
DEBUG=true
HOST=0.0.0.0
PORT=8000
APP_NAME=AI News Agent Backend

# CORS é…ç½®
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000

# LLM é…ç½®ï¼ˆå¯é€‰ï¼Œæœªæ¥åŠŸèƒ½ï¼‰
LLM_PROVIDER=none  # none | google | openai
GOOGLE_API_KEY=your_key_here
OPENAI_API_KEY=your_key_here

# Agent é…ç½®
ENABLE_INTENT_ANALYSIS=false
ENABLE_CONTENT_ANALYSIS=false

# Redis é…ç½®ï¼ˆå¯é€‰ï¼‰
REDIS_HOST=redis
REDIS_PORT=6379
```

---

## ğŸš€ éƒ¨ç½²è¯´æ˜

### Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. æ„å»ºç”Ÿäº§é•œåƒ
docker build -f docker/Dockerfile -t agent-backend:latest .

# 2. è¿è¡Œå®¹å™¨
docker run -d \
  --name agent-backend \
  -p 8000:8000 \
  -e DEBUG=false \
  -e ALLOWED_ORIGINS=https://yourdomain.com \
  agent-backend:latest
```

### Vercel éƒ¨ç½²

é¡¹ç›®å·²é…ç½® Vercel éƒ¨ç½²æ”¯æŒï¼š

```bash
# å®‰è£… Vercel CLI
npm i -g vercel

# éƒ¨ç½²
cd agent-backend
vercel
```

é…ç½®æ–‡ä»¶ï¼š`vercel.json`

---

## ğŸ“Š å½“å‰çŠ¶æ€

### âœ… å·²å®Œæˆ

- [x] ç»Ÿä¸€çš„ Intent æ¨¡å‹
- [x] Intent Analyzerï¼ˆæ„å›¾åˆ†æå™¨ï¼‰
- [x] å‘½ä»¤å¼è¾“å…¥æ”¯æŒ
- [x] åŸºç¡€è‡ªç„¶è¯­è¨€è§£æï¼ˆå…³é”®è¯åŒ¹é…ï¼‰
- [x] æ’ä»¶åŒ–æ¶æ„
- [x] News Plugin å®ç°
- [x] Docker å¼€å‘ç¯å¢ƒ
- [x] API æ–‡æ¡£
- [x] æµ‹è¯•è¦†ç›–

### ğŸš§ å¼€å‘ä¸­

- [ ] LLM é›†æˆï¼ˆGoogle Gemini 1.5 Flashï¼‰
- [ ] RSS æ•°æ®æºé›†æˆ
- [ ] çœŸå®æ–°é—»æ•°æ®æ›¿æ¢ mock æ•°æ®
- [ ] å†…å®¹åˆ†æå’Œæ´å¯Ÿç”Ÿæˆ
- [ ] ä¸Šä¸‹æ–‡ç®¡ç†å’Œå¤šè½®å¯¹è¯

### ğŸ“‹ è®¡åˆ’ä¸­

- [ ] ç”¨æˆ·åå¥½å­¦ä¹ 
- [ ] è¶‹åŠ¿é¢„æµ‹
- [ ] å¤šæ¨¡æ€æ”¯æŒ
- [ ] çŸ¥è¯†å›¾è°±æ„å»º

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **[DESIGN.md](./DESIGN.md)** - å®Œæ•´çš„è®¾è®¡æ–‡æ¡£å’ŒæŠ€æœ¯é€‰å‹
- **[GUIDE.md](./GUIDE.md)** - è¯¦ç»†çš„å¼€å‘æŒ‡å—
- **[docker/README.md](./docker/README.md)** - Docker ä½¿ç”¨è¯´æ˜

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µï¼š[DouDou](https://github.com/yourusername/doudou)
- é—®é¢˜åé¦ˆï¼š[Issues](https://github.com/yourusername/doudou/issues)

---

**ç‰ˆæœ¬**ï¼š2.0.0  
**æœ€åæ›´æ–°**ï¼š2024-01-01
